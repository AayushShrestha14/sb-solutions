<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet id="5-create-hibernate_sequence" author="msucil">
    <createTable tableName="hibernate_sequence">
      <column name="next_val" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-oauth-token-table" author="msucil">
    <createTable tableName="oauth_access_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication_id" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="client_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="false"/>
      </column>
      <column name="refresh_token" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <addPrimaryKey tableName="oauth_access_token" columnNames="authentication_id"/>

    <createTable tableName="oauth_refresh_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-table" author="david">
    <createTable tableName="role">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_role_role_name"
        />
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_access" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>
  <changeSet id="5-create-province" author="david">
    <createTable tableName="province">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-district" author="david">
    <createTable tableName="district">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_district_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-municipality-vdc" author="david">
    <createTable tableName="municipality_vdc">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_municipality_vdc_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-branch" author="david">
    <createTable tableName="branch">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_branch_name"
        />
      </column>
      <column name="branch_code" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-user-table" author="msucil">
    <createTable tableName="users">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_username"
        />
      </column>
      <column name="email" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_email"
        />
      </column>
      <column name="password" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="branch_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_branch_id"
          referencedTableName="branch"
          referencedColumnNames="id"/>
      </column>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="signature_image" type="VARCHAR(256)"/>
      <column name="profile_picture" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-user-table" author="david">
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="created_by_id"
      constraintName="fk_user_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="modified_by_id"
      constraintName="fk_user_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>


  <changeSet id="5-create-foreign-key-in-branch-table" author="david">
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="created_by_id"
      constraintName="fk_branch_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="modified_by_id"
      constraintName="fk_branch_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-role-table" author="david">
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="created_by_id"
      constraintName="fk_role_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="modified_by_id"
      constraintName="fk_role_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-rights" author="david">
    <createTable tableName="rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="rights" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-permission" author="david">
    <createTable tableName="permission">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="permission_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_permission_permission_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
      <column name="orders" type="BIGINT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-nav" author="david">
    <createTable tableName="sub_nav">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sub_nav_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_sub_nav_sub_nav_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-url-api" author="david">
    <createTable tableName="url_api">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="api_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="type" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-permission-api-list" author="rujan">
    <createTable tableName="permission_api_list">
      <column name="permission_id" type="BIGINT">

      </column>
      <column name="api_list_id" type="BIGINT">
        <constraints unique="true"/>
      </column>

    </createTable>
    <addForeignKeyConstraint baseColumnNames="permission_id"
      baseTableName="permission_api_list"
      constraintName="fk_permission_api_list_permission_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="permission"/>
  </changeSet>

  <changeSet id="5-permission-sub-navs" author="rujan">
    <createTable tableName="permission_sub_navs">
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_permission_nav_id"
          referencedTableName="permission"
          referencedColumnNames="id"
        />

      </column>
      <column name="sub_navs_id" type="BIGINT">
        <constraints unique="true"
          foreignKeyName="fk_sub_nav_id"
          referencedTableName="sub_nav"
          referencedColumnNames="id"/>
      </column>

    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights" author="david">
    <createTable tableName="role_permission_rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_permission_id"
          referencedTableName="permission"
          referencedColumnNames="id"/>
      </column>
      <column name="del" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights-api-rights" author="david">
    <createTable tableName="role_permission_rights_api_rights">
      <column name="role_permission_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="api_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="role_permission_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_role_permission_rights_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="role_permission_rights"/>
    <addForeignKeyConstraint baseColumnNames="api_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="url_api"/>
  </changeSet>

  <changeSet id="5-create-company" author="david">
    <createTable tableName="company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="4-create-nepse_company" author="david">
    <createTable tableName="nepse_company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount_per_unit" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-base_http" author="david">
    <createTable tableName="base_http">
      <column name="base_http_id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="base_url" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="flag" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan_template" author="david">
    <createTable tableName="loan_template">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="template_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="order_url" type="INT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="template_view" type="VARCHAR2(4000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sector" author="david">
    <createTable tableName="sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sector_code" type="VARCHAR(256)"/>
      <column name="sector_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-sector" author="david">
    <createTable tableName="sub_sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_sector_code" type="VARCHAR(256)"/>
      <column name="sub_sector_name" type="VARCHAR(256)"/>
      <column name="sector_id" type="BIGINT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="sector_id"
      baseTableName="sub_sector"
      constraintName="fk_sub_sector_sector_id"
      referencedColumnNames="id"
      referencedTableName="sector"/>

  </changeSet>

  <changeSet id="5-create-segment" author="david">
    <createTable tableName="segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="segment_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-segment" author="david">
    <createTable tableName="sub_segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="is_funded" type="BOOLEAN">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_segment_name" type="VARCHAR(256)"/>
      <column name="segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="segment_id"
      baseTableName="sub_segment"
      constraintName="fk_sub_segment_segment_id"
      referencedColumnNames="id"
      referencedTableName="segment"/>

  </changeSet>


  <changeSet id="5-create-valuator" author="david">
    <createTable tableName="valuator">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="contact_no" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="site_province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="site_district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="site_municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="site_street_name" type="VARCHAR(256)"/>
      <column name="site_ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-config" author="david">
    <createTable tableName="loan_config">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="is_fundable" type="boolean"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="is_renewable" type="boolean"/>
      <column name="total_points" type="BIGINT"/>
      <column name="enable_eligibility" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-sub-segment-loan-config" author="david">
    <createTable tableName="sub_segment_loan_config">
      <column name="sub_segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="sub_segment_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_sub_segment_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="sub_segment"/>
    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_list_loan_config_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="5-create-document" author="david">
    <createTable tableName="document">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_document_name"
        />
      </column>
      <column name="url" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-cycle" author="david">
    <createTable tableName="loan_cycle">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="cycle" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="label" type="VARCHAR2(1000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-document-loan-cycle" author="msucil">
    <createTable tableName="document_loan_cycle">
      <column name="document_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_cycle_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="document_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_document_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
    <addForeignKeyConstraint baseColumnNames="loan_cycle_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_loan_cycle_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_cycle"/>
  </changeSet>

  <changeSet id="5-create-loan-config-template-list" author="david">
    <createTable tableName="loan_config_template_list">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="template_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="template_list_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_template_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_template"/>
  </changeSet>

  <changeSet id="5-create-loan-config-initial" author="david">
    <createTable tableName="loan_config_initial">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="initial_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="initial_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_initial_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-loan-config-renew" author="david">
    <createTable tableName="loan_config_renew">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="renew_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="renew_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_renew_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-approval-limit" author="david">
    <createTable tableName="approval_limit">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount" type="DOUBLE"/>
      <column name="loan_approval_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_category_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_loan_category_id"
          referencedTableName="loan_config"
          referencedColumnNames="id"
        />
      </column>
      <column name="authorities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_authorities_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-customer" author="david">
    <createTable tableName="customer">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_name" type="VARCHAR(256)"/>
      <column name="customer_id" type="VARCHAR(256)"/>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipalities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="telephone" type="VARCHAR(256)"/>
      <column name="mobile" type="VARCHAR(256)"/>
      <column name="email" type="VARCHAR(256)"/>
      <column name="initial_relation_date" type="DATE"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-customer-relative" author="david">
    <createTable tableName="customer_relative">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_relation" type="VARCHAR(256)"/>
      <column name="customer_relative_name" type="VARCHAR(256)"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-customer-customer-relatives" author="david">
    <createTable tableName="customer_customer_relatives">
      <column name="customer_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="customer_relatives_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="customer_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer"/>
    <addForeignKeyConstraint baseColumnNames="customer_relatives_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_relatives_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer_relative"/>
  </changeSet>

  <changeSet id="5-create-capital" author="david">
    <createTable tableName="capital">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="authorized_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="paid_up_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="issued_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="total_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="fixed_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="working_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="number_of_shareholder" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-legal-status" author="david">
    <createTable tableName="legal_status">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="corporate_structure" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_under_act" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_number" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal_status_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal-status_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-swot" author="david">
    <createTable tableName="swot">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="strength" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="weakness" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="opportunity" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="threats" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity_info" author="david">
    <createTable tableName="entity_info">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="legal_status_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_legal_status_id"
          referencedTableName="legal_status"
          referencedColumnNames="id"/>
      </column>
      <column name="capital_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_capital_id"
          referencedTableName="capital"
          referencedColumnNames="id"/>
      </column>
      <column name="swot_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_swot_id"
          referencedTableName="swot"
          referencedColumnNames="id"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-management-team" author="david">
    <createTable tableName="management_team">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="designation" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-proprietor" author="david">
    <createTable tableName="proprietor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="contact_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="share" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity-info-management-team-list" author="david">
    <createTable tableName="entity_info_management_team_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="management_team_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="management_team_list_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_management_team_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="management_team"/>
  </changeSet>

  <changeSet id="5-create-entity-info-proprietors-list" author="david">
    <createTable tableName="entity_info_proprietors_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="proprietors_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="proprietors_list_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_proprietors_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="proprietor"/>
  </changeSet>

  <changeSet id="5-create-guarantor" author="david">
    <createTable tableName="guarantor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="address" type="VARCHAR(256)"/>
      <column name="citizenNumber" type="VARCHAR(256)"/>
      <column name="citizenIssuedYear" type="DATE"/>
      <column name="citizenIssuedPlace" type="VARCHAR(256)"/>
      <column name="contactNumber" type="VARCHAR(256)"/>
      <column name="fatherName" type="VARCHAR(256)"/>
      <column name="grandFatherName" type="VARCHAR(256)"/>
      <column name="relationship" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-type-table" author="msucil">
    <createTable tableName="memo_type">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-table" author="msucil">
    <createTable tableName="memo">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="reference_number" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="subject" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="content" type="TEXT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_type_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_type_id"
          referencedTableName="memo_type"
          referencedColumnNames="id"
        />
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-cc-user-table" author="msucil">
    <createTable tableName="memo_cc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="user_id"
      constraintName="fk_memo_cc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_cc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-bcc-user-table" author="msucil">
    <createTable tableName="memo_bcc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="user_id"
      constraintName="fk_memo_bcc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_bcc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-stage-table" author="msucil">
    <createTable tableName="memo_stage">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_memo_id"
          referencedColumnNames="id"
          referencedTableName="memo"
        />
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_by_user_id"
          referencedColumnNames="id"
          referencedTableName="users"
        />
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_to_user_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="note" type="TEXT"/>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <!-- Do not update changeset above this section //-->

  <!-- Changesets accumulated with each version of release //-->
  <include file="release/v0.1.0-release.xml" relativeToChangelogFile="true"/>
  <include file="release/v0.2.0-release.xml" relativeToChangelogFile="true"/>
  <include file="release/v1.0.0-release.xml" relativeToChangelogFile="true"/>
  <include file="release/v2.0.0-release.xml" relativeToChangelogFile="true"/>


  <!-- Update changesets below this section //-->
  <changeSet id="94-create-reporting_info" author="elvin">
    <preConditions>
      <not>
        <tableExists tableName="reporting_info"/>
      </not>
    </preConditions>

    <createTable tableName="reporting_info">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="name" type="VARCHAR(255)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT"/>
    </createTable>
  </changeSet>

  <changeSet id="94-create-reporting_info_level" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="reporting_info_level"/>
      </not>
    </preConditions>

    <createTable tableName="reporting_info_level">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_level_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_level_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="code" type="VARCHAR(255)"/>
      <column name="description" type="VARCHAR(500)"/>
      <column name="status" type="INT"/>
    </createTable>
  </changeSet>

  <changeSet id="94-create-reporting_info_reporting_info_levels" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="reporting_info_reporting_info_levels"/>
      </not>
    </preConditions>

    <createTable tableName="reporting_info_reporting_info_levels">
      <column name="reporting_info_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_reporting_info_levels_reporting_info_id_reporting_info_id"
          referencedTableName="reporting_info"
          referencedColumnNames="id"/>
      </column>
      <column name="reporting_info_levels_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
          referencedTableName="reporting_info_level"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="94-create-reporting_info_level_reporting_info_levels" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="reporting_info_level_reporting_info_levels"/>
      </not>
    </preConditions>

    <createTable tableName="reporting_info_level_reporting_info_levels">
      <column name="reporting_info_level_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_level_reporting_info_levels_reporting_info_level_id_reporting_info_level_id"
          referencedTableName="reporting_info_level"
          referencedColumnNames="id"/>
      </column>
      <column name="reporting_info_levels_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_reporting_info_level_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
          referencedTableName="reporting_info_level"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="94-create-customer_loan_reporting_info_levels" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_loan_reporting_info_levels"/>
      </not>
    </preConditions>

    <createTable tableName="customer_loan_reporting_info_levels">
      <column name="customer_loan_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_reporting_info_levels_customer_loan_id_customer_loan_id"
          referencedTableName="customer_loan"
          referencedColumnNames="id"/>
      </column>
      <column name="reporting_info_levels_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
          referencedTableName="reporting_info_level"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="94-drop-sub_sector" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="sub_sector"/>
    </preConditions>

    <dropTable tableName="sub_sector"/>
  </changeSet>

  <changeSet id="94-drop-sector" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="sector"/>
    </preConditions>

    <dropTable tableName="sector"/>
  </changeSet>

  <changeSet id="94-drop-sub_segment_loan_config" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="sub_segment_loan_config"/>
    </preConditions>

    <dropTable tableName="sub_segment_loan_config"/>
  </changeSet>

  <changeSet id="94-drop-sub_segment" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="sub_segment"/>
    </preConditions>

    <dropTable tableName="sub_segment"/>
  </changeSet>

  <changeSet id="94-drop-segment" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="segment"/>
    </preConditions>

    <dropTable tableName="segment"/>
  </changeSet>

  <changeSet id="94-create-insurance" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="insurance"/>
      </not>
    </preConditions>

    <createTable tableName="insurance">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="company" type="VARCHAR(256)"/>
      <column name="insured_amount" type="DOUBLE"/>
      <column name="premium_amount" type="VARCHAR(256)"/>
      <column name="issued_date" type="DATE"/>
      <column name="expiry_date" type="DATE"/>
      <column name="policy_type" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_insurance_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_insurance_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="94-alter-customer-loan-add-insurance-id" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="insurance_id"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="insurance_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_insurance_id_insurance_id"
          referencedTableName="insurance"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="95-create-notification-master" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="notification_master"/>
      </not>
    </preConditions>

    <createTable tableName="notification_master">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="notification_key" type="VARCHAR(256)"/>
      <column name="value" type="INT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_notification_master_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_notification_master_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="96-alter-customer_loan-add-has_insurance_expired" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="is_insurance_expired"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="is_insurance_expired" type="BIT" defaultValue="0"/>
    </addColumn>
  </changeSet>

  <changeSet id="97-alter-notification-master-add-status" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="notification_master" columnName="status"/>
      </not>
    </preConditions>

    <addColumn tableName="notification_master">
      <column name="status" type="INT"/>
    </addColumn>
  </changeSet>

  <changeSet id="98-alter-legal-status-add-registration-expiry-date" author="buddha-shrestha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="legal_status" columnName="registration_expiry_date"/>
      </not>
    </preConditions>
    <addColumn tableName="legal_status">
      <column name="registration_expiry_date" type="DATE"/>
    </addColumn>
  </changeSet>

  <changeSet id="99-alter-legal-status-audit-add-registration-expiry-date" author="buddha-shrestha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="legal_status_audit" columnName="registration_expiry_date"/>
      </not>
    </preConditions>
    <addColumn tableName="legal_status_audit">
      <column name="registration_expiry_date" type="DATE"/>
    </addColumn>
  </changeSet>


  <changeSet id="98-create-insurance_history" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="insurance_history"/>
      </not>
    </preConditions>

    <createTable tableName="insurance_history">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="customer_loan_id" type="VARCHAR(256)"/>
      <column name="company" type="VARCHAR(256)"/>
      <column name="insured_amount" type="DOUBLE"/>
      <column name="premium_amount" type="VARCHAR(256)"/>
      <column name="issued_date" type="DATE"/>
      <column name="expiry_date" type="DATE"/>
      <column name="policy_type" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_insurance_history_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_insurance_history_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="98-alter-insurance-add-remarks" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance" columnName="remarks"/>
      </not>
    </preConditions>

    <addColumn tableName="insurance">
      <column name="remarks" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="99-alter-customer-loan-alter-limit_exceed" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="limit_exceed"/>
    </preConditions>

    <modifyDataType tableName="customer_loan" columnName="limit_exceed" newDataType="INT"/>
    <renameColumn tableName="customer_loan" oldColumnName="limit_exceed" newColumnName="loan_flag"/>
  </changeSet>

  <changeSet id="100-alter-customer-loan-drop-is_insurance_expired" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="is_insurance_expired"/>
    </preConditions>

    <dropDefaultValue tableName="customer_loan" columnName="is_insurance_expired"/>
    <dropColumn tableName="customer_loan" columnName="is_insurance_expired"/>
  </changeSet>

  <changeSet id="101-alter-customer_loan-drop-loan_flag" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="loan_flag"/>
    </preConditions>

    <dropColumn tableName="customer_loan" columnName="loan_flag"/>
  </changeSet>

  <changeSet id="101-alter-customer_loan-drop-loan_remarks" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="loan_remarks"/>
    </preConditions>

    <dropColumn tableName="customer_loan" columnName="loan_remarks"/>
  </changeSet>

  <changeSet id="101-create-customer_loan_flag" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_loan_flag"/>
      </not>
    </preConditions>

    <createTable tableName="customer_loan_flag">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="flag" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(1000)">
        <constraints nullable="false"/>
      </column>
      <column name="flag_order" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="customer_loan_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_customer_loan_flag_customer_loan_id_customer_loan_id"
          referencedTableName="customer_loan"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="101-alter-insurance-premium_amount-type" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="insurance" columnName="premium_amount"/>
      <columnExists tableName="insurance_history" columnName="premium_amount"/>
    </preConditions>

    <modifyDataType tableName="insurance" columnName="premium_amount" newDataType="DOUBLE"/>
    <modifyDataType tableName="insurance_history" columnName="premium_amount" newDataType="DOUBLE"/>
  </changeSet>

  <changeSet id="102-alter-insurance-history-add-remarks" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance_history" columnName="remarks"/>
      </not>
    </preConditions>

    <addColumn tableName="insurance_history">
      <column name="remarks" type="LONGTEXT"></column>
    </addColumn>
  </changeSet>

  <changeSet id="103-alter-customer_loan_flag-add-notified_by_email" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan_flag" columnName="notified_by_email"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan_flag">
      <column name="notified_by_email" type="BOOLEAN" defaultValue="0"/>
    </addColumn>
  </changeSet>

  <changeSet id="110-add-table-company-companyLocations" author="buddha-shrestha">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="company_locations"/>
      </not>
    </preConditions>
    <createTable tableName="company_locations">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_locations_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_locations_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="house_number" type="VARCHAR(256)"/>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="address" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="111-add-table-company_locations-audit" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="company_locations_audit"/>
      </not>
    </preConditions>
    <createTable tableName="company_locations_audit">
      <column name="id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="rev" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="revtype" type="SMALLINT"/>
      <column name="house_number" type="VARCHAR(256)"/>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="address" type="VARCHAR(256)"/>
    </createTable>
    <addPrimaryKey tableName="company_locations_audit" columnNames="id,rev"
      constraintName="PK_company_locations_audit_id_rev"/>
    <addForeignKeyConstraint baseTableName="company_locations_audit" baseColumnNames="rev"
      constraintName="FK_company_locations_audit_rev_revinfo_rev"
      referencedTableName="revinfo" referencedColumnNames="rev"/>
   </changeSet>

  <changeSet id="112-add-column-company-locations-id-table-company-info-" author="buddha-shrestha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="company_locations_id"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="company_locations_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_company_locations_id"
          referencedTableName="company_locations"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="113-add-column-company-locations-id-table-company-info-audit"
    author="buddha-shrestha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="company_locations_id"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="company_locations_id" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="94-create-table-chat-message" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="chat_message"/>
      </not>
    </preConditions>
    <createTable tableName="chat_message">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="from_user_id" type="VARCHAR(255)"/>
      <column name="to_user_id" type="VARCHAR(255)"/>
      <column name="message" type="LONGTEXT"/>
      <column name="sender_user" type="VARCHAR(255)"/>
      <column name="seen_flag" type="BOOLEAN" defaultValue="false"/>
      <column name="send_date" type="DATETIME"/>


      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_chat_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_chat_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>

  </changeSet>

  <changeSet id="114-rename-account_purpose-to-account_category" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="account_purpose"/>
    </preConditions>

    <renameTable oldTableName="account_purpose" newTableName="account_category"/>
  </changeSet>

  <changeSet id="114-drop-table-account_type_account_purpose" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="account_type_account_purpose"/>
    </preConditions>

    <dropTable tableName="account_type_account_purpose"/>
  </changeSet>

  <changeSet id="114-rename-account-category-primary-key" author="elvin">
    <preConditions onFail="MARK_RAN">
      <primaryKeyExists tableName="account_category" primaryKeyName="PK_ACCOUNT_PURPOSE"/>
    </preConditions>

    <dropPrimaryKey tableName="account_category" constraintName="PK_ACCOUNT_PURPOSE"/>
    <addPrimaryKey
      tableName="account_category"
      columnNames="id"
      constraintName="PK_ACCOUNT_CATEGORY"/>
  </changeSet>

  <changeSet id="114-alter-account_category-add-account_type_id" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="account_category" columnName="account_type_id"/>
      </not>
    </preConditions>

    <addColumn tableName="account_category">
      <column name="account_type_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_account_category_account_type_id_account_type_id"
          referencedTableName="account_type"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="114-create-table-account_category_documents" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="account_category_documents"/>
      </not>
    </preConditions>

    <createTable tableName="account_category_documents">
      <column name="account_category_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_account_category_documents_account_category_id"
          referencedTableName="account_category"
          referencedColumnNames="id"/>
      </column>
      <column name="documents_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_account_category_documents_documents_id"
          referencedTableName="document"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="115-add-remark-account-opening-table" author="bibash">
    <preConditions>
      <not>
        <columnExists tableName="opening_form" columnName="remark"/>
      </not>
    </preConditions>
    <addColumn tableName="opening_form">
      <column name="remark" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="116-add-last-follow-up-account-opening-table" author="bibash">
    <preConditions>
      <not>
        <columnExists tableName="opening_form" columnName="last_follow_up"/>
      </not>
    </preConditions>
    <addColumn tableName="opening_form">
      <column name="last_follow_up" type="DATE"/>
    </addColumn>
  </changeSet>

  <changeSet id="117-alter-customer-loan-add-ref-no" author="sunil">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="ref_no"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="ref_no" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="118-alter-loan_config-add-category" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="loan_config" columnName="loan_category"/>
      </not>
    </preConditions>
    <addColumn tableName="loan_config">
      <column name="loan_category" type="SMALLINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="119-alter-customer-remove-citizenship-constraint" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer" columnName="citizenship_number"/>
    </preConditions>
    <dropUniqueConstraint tableName="customer" constraintName="customer_unique_citizenship_number"/>
  </changeSet>

  <changeSet id="120-alter-loan_config-add-loan_tag" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="loan_config" columnName="loan_tag"/>
      </not>
    </preConditions>
    <addColumn tableName="loan_config">
      <column name="loan_tag" type="SMALLINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="123-alter-account_category_add_interest_rate_and_minimum_balance" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="account_category" columnName="interest_rate"/>
        <columnExists tableName="account_category" columnName="minimum_balance"/>
      </not>
    </preConditions>

    <addColumn tableName="account_category">
      <column name="interest_rate" type="float"/>
      <column name="minimum_balance" type="double"/>
    </addColumn>
  </changeSet>

  <changeSet id="create-credit-risk-grading-alpha" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="credit_risk_grading_alpha"/>
      </not>
    </preConditions>
    <createTable tableName="credit_risk_grading_alpha">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_credit_risk_grading_alpha_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_credit_risk_grading_alpha_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="alter-customer-loan-add-credit-risk-grading-alpha" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="credit_risk_grading_alpha_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="credit_risk_grading_alpha_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_credit_risk_grading_alpha_id"
          referencedTableName="credit_risk_grading_alpha"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="124-alter-account_category_remove_interest_rate_and_minimum_balance"
    author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="account_category" columnName="interest_rate"/>
      <columnExists tableName="account_category" columnName="minimum_balance"/>
    </preConditions>

    <dropColumn tableName="account_category" columnName="interest_rate"/>
    <dropColumn tableName="account_category" columnName="minimum_balance"/>
  </changeSet>

  <changeSet id="124-alter-account_category_add_additional_information" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="account_category" columnName="additional_information"/>
      </not>
    </preConditions>

    <addColumn tableName="account_category">
      <column name="additional_information" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="125-create-customer-info-table" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_info"/>
      </not>
    </preConditions>
    <createTable tableName="customer_info">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="name" type="varchar(256)">
      </column>
      <column name="id_type" type="BIGINT">
      </column>
      <column name="id_number" type="BIGINT">
      </column>
      <column name="id_reg_date" type="DATE">
      </column>
      <column name="customer_type" type="BIGINT">
      </column>
      <column name="contact_no" type="varchar(50)">
      </column>
      <column name="is_blacklist" type="BOOLEAN">
      </column>
      <column name="email" type="varchar(50)">
      </column>

      <column name="id_reg_place" type="varchar(100)">

      </column>
      <column name="associate_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="BIGINT">
      </column>

      <column name="site_visit_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_site_visit_id"
          referencedTableName="site_visit"
          referencedColumnNames="id"/>
      </column>
      <column name="financial_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_financial_id"
          referencedTableName="financial"
          referencedColumnNames="id"/>
      </column>
      <column name="group_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_group_id"
          referencedTableName="groups"
          referencedColumnNames="id"/>
      </column>
      <column name="guarantor_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_guarantor_id"
          referencedTableName="guarantor"
          referencedColumnNames="id"/>
      </column>
      <column name="insurance_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_insurance_id"
          referencedTableName="insurance"
          referencedColumnNames="id"/>
      </column>
      <column name="credit_risk_grading_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_credit_risk_grading_id"
          referencedTableName="credit_risk_grading"
          referencedColumnNames="id"/>
      </column>
      <column name="credit_risk_grading_alpha_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_credit_risk_grading_alpha_id"
          referencedTableName="credit_risk_grading_alpha"
          referencedColumnNames="id"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="126-alter-customer-loan-add-customer-info" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="loan_holder_id"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="loan_holder_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_customer_loan_id"
          referencedTableName="customer_info"
          referencedColumnNames="id"/>
      </column>
    </addColumn>

  </changeSet>

  <changeSet id="127-add-table-contact_person" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="contact_person"/>
      </not>
    </preConditions>
    <createTable tableName="contact_person">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_contact_person_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_contact_person_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="name" type="VARCHAR(255)"/>
      <column name="contact_number" type="VARCHAR(20)"/>
      <column name="email" type="VARCHAR(255)"/>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_contact_person_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_contact_person_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_contact_person_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="128-alter-company_info-add-contact_person_id" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="contact_person_id"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="contact_person_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_info_contact_person_id"
          referencedTableName="contact_person"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="129-alter-customer-info-add-security-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="security_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="security_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_security_id"
          referencedTableName="security"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="130-alter-customer-info-add-share-security-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="share_security_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="share_security_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_share_security_id"
          referencedTableName="share_security"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="131-alter-table-customer-share-data-column-rename-share_rate" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_share_data" columnName="share_rate"/>
    </preConditions>
    <renameColumn tableName="customer_share_data" oldColumnName="share_rate"
      newColumnName="amount_per_unit"/>
  </changeSet>

  <changeSet id="132-alter-customer-share-date_add-column-company-code" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_share_data" columnName="company_code"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_share_data">
      <column name="company_code" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="133-alter-customer-info-add-insurance-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="insurance_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="insurance_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_insurance_id"
          referencedTableName="insurance"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="133-alter-customer_info-add-guarantor_details_id" author="Aashish">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="guarantors_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="guarantors_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_guarantors_id"
          referencedTableName="guarantor_detail"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="134-add-account-no-las-account-opening-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="opening_form" columnName="account_number"/>
      </not>
    </preConditions>
    <addColumn tableName="opening_form">
      <column name="account_number" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="135-add-last-follow-up-by-account-opening-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="opening_form" columnName="last_follow_up_by"/>
      </not>
    </preConditions>
    <addColumn tableName="opening_form">
      <column name="last_follow_up_by" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_account_opening_last_follow_up__by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="136-add-customer-photo-path-account-opening-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="opening_form" columnName="customer_photo_path"/>
      </not>
    </preConditions>
    <addColumn tableName="opening_form">
      <column name="customer_photo_path" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="137-alter-customer_info-add-branchid" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="branch_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="branch_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_branch_id"
          referencedTableName="branch"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="138-alter-insurance-add-column-policy-number" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance" columnName="policy_number"/>
      </not>
    </preConditions>
    <addColumn tableName="insurance">
      <column name="policy_number" type="varchar(256)"/>
    </addColumn>
  </changeSet>


  <changeSet id="139-create-customer-general-document-table" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_general_document"/>
      </not>
    </preConditions>
    <createTable tableName="customer_general_document">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="customer_info_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_customer_general_document_customer_info_id"
          referencedColumnNames="id"
          referencedTableName="customer_info"
        />
      </column>
      <column name="document_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_customer_general_document_document_id"
          referencedColumnNames="id"
          referencedTableName="document"
        />
      </column>
      <column name="doc_path" type="LONGTEXT"/>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="142-alter-data-type-id-number-customer-info" author="rujan">
    <preConditions onFail="MARK_RAN">

      <columnExists tableName="customer_info" columnName="id_number"/>

    </preConditions>
    <modifyDataType columnName="id_number" newDataType="varchar(100)" tableName="customer_info"/>
  </changeSet>

  <changeSet id="140-create-customer-group-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_group"/>
      </not>
    </preConditions>
    <createTable tableName="customer_group">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="group_code" type="varchar(256)">
        <constraints nullable="false" unique="true" uniqueConstraintName="customer_group_code"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="group_limit" type="BIGINT">
      </column>
      <column name="status" type="INT"/>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="141-create-column-customer-info-reference-id" author="bibash">
  <preConditions onFail="MARK_RAN">
    <not>
      <columnExists tableName="customer_info" columnName="customer_info_group_id"/>
    </not>
  </preConditions>
    <addColumn tableName="customer_info">
      <column name="customer_info_customer_group_id" type="Bigint">
        <constraints referencedTableName="customer_group" referencedColumnNames="id"
        foreignKeyName="fk_customer_info_customer_group_id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="142-alter-customer-general-document-remove-customer-info-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_general_document" columnName="customer_info_id"/>
    </preConditions>
    <dropForeignKeyConstraint baseTableName="customer_general_document" constraintName="fk_customer_general_document_customer_info_id"/>
    <dropColumn tableName="customer_general_document" columnName="customer_info_id"/>
  </changeSet>

  <changeSet id="143-alter-customer-general-document-add-column-customer-info-id-" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_general_document" columnName="customer_info_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_general_document">
      <column name="customer_info_id" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="142-alter-customer-info-remove-insurance-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_info" columnName="insurance_id"/>
    </preConditions>
    <dropForeignKeyConstraint baseTableName="customer_info" constraintName="fk_customer_info_insurance_id"/>
    <dropColumn tableName="customer_info" columnName="insurance_id"/>
  </changeSet>

  <changeSet id="143-add-customer-info-insurance-third-table" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_info_insurance"/>
      </not>
    </preConditions>

    <createTable tableName="customer_info_insurance">
      <column name="customer_info_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_info_insurance_customer_info_id_customer_info_id"
          referencedTableName="customer_info"
          referencedColumnNames="id"/>
      </column>
      <column name="insurance_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_info_insurance_insurance_id_insurance_id"
          referencedTableName="insurance"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="139-create-combined_loan" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="combined_loan"/>
      </not>
    </preConditions>

    <createTable tableName="combined_loan">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="139-alter-customer_loan" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="combined_loan_id"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="combined_loan_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_loan_combined_loan_id_combined_loan_id"
          referencedTableName="combined_loan" referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="140-alter-company-info-add-column-contact-num" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="contact_num"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="contact_num" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="141-alter-company-info-add-column-email" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="email"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="email" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="142-alter-company-info-add-column-issue-place" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="issue_place"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="issue_place" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="143-alter-company-info-audit-add-column-issue-place" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="issue_place"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="issue_place" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="144-alter-company-info-audit-add-column-contact-num" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="contact_num"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="contact_num" type="varchar(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="145-alter-company-info-audit-add-column-email" author="sujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="email"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="email" type="varchar(256)"/>
    </addColumn>
  </changeSet>



  <changeSet id="115-alter-proposal-add-checkedData-column" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="proposal" columnName="checked_data"/>
      </not>
    </preConditions>
    <addColumn tableName="proposal">
      <column name="checked_data" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="116-alter-proposal-add-checkedData-column" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="proposal_audit" columnName="checked_data"/>
      </not>
    </preConditions>
    <addColumn tableName="proposal_audit">
      <column name="checked_data" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>


  <changeSet id="117-alter-customer-info-column" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="profile_pic"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="profile_pic" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="150-crg-group" author="sunil">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="crg_group"/>
      </not>
    </preConditions>

    <createTable tableName="crg_group">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="label" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="weightage" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

    </createTable>
  </changeSet>

  <changeSet id="151-alter-customer_loan_remove_maw_credit_risk_grading_id" author="sunil">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="maw_credit_risk_grading_id"/>
    </preConditions>
    <dropForeignKeyConstraint baseTableName="customer_loan"
                              constraintName="fk_customer_loan_maw_credit_risk_grading_id"/>
    <dropColumn tableName="customer_loan" columnName="maw_credit_risk_grading_id"/>

  </changeSet>

  <changeSet id="152-remove-maw_credit_risk_grading" author="sunil">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="maw_credit_risk_grading"/>
    </preConditions>

    <dropTable tableName="maw_credit_risk_grading"/>
  </changeSet>

  <changeSet id="153-create-crg-question" author="sunil">
    <createTable tableName="crg_question">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="maximum_points" type="DECIMAL(12, 2)"/>
      <column name="appearance_order" type="BIGINT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="crg_group_id" type="BIGINT"/>
      <column name="loan_approval_type" type="BIGINT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="154-create-crg-answer" author="sunil">
    <createTable tableName="crg_answer">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="points" type="DECIMAL(12, 2)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="crg_question_id" type="BIGINT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="crg_question_id"
                             baseTableName="crg_answer"
                             constraintName="fk_crg_answer_crg_question_id"
                             onDelete="CASCADE"
                             onUpdate="CASCADE"
                             referencedColumnNames="id"
                             referencedTableName="crg_question"/>
  </changeSet>


  <changeSet id="151-alter-customer_loan_flag-remove-fk_customer_loan" author="elvin">
    <preConditions onFail="MARK_RAN">
      <foreignKeyConstraintExists
        foreignKeyTableName="customer_loan_flag"
        foreignKeyName="fk_customer_loan_flag_customer_loan_id_customer_loan_id"/>
    </preConditions>

    <dropForeignKeyConstraint
      baseTableName="customer_loan_flag"
      constraintName="fk_customer_loan_flag_customer_loan_id_customer_loan_id"/>
  </changeSet>

  <changeSet id="151-alter-customer_loan_flag-add-customer_info_id" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan_flag" columnName="customer_info_id"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan_flag">
      <column name="customer_info_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_loan_flag_customer_info_id_customer_info_id"
          referencedTableName="customer_info"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="151-alter-customer_loan_flag_allow_customer_loan_id_null" author="elvin">
    <dropNotNullConstraint
      tableName="customer_loan_flag"
      columnName="customer_loan_id"
      columnDataType="BIGINT"/>
  </changeSet>

  <changeSet id="152-create-associate-table-customer-loan-tagged" author="bibash">
    <preConditions onFail="MARK_RAN">
     <not>
       <tableExists tableName="customer_loan_guarantor"/>
     </not>
    </preConditions>
    <createTable tableName="customer_loan_guarantor">
      <column name="customer_loan_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_loan_id_combined_loan_id"
          referencedTableName="customer_loan" referencedColumnNames="id"/>
      </column>
      <column name="guarantor_id" type="BIGINT">
        <constraints foreignKeyName="fk_guarantor_customer_loan_id"
          referencedTableName="guarantor" referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

    <changeSet id="155-alter-loan-config-add-short_names" author="Sadaiba">
    <preConditions onFail="MARK_RAN">
        <not>
            <columnExists tableName="loan_config" columnName="short_names"/>
        </not>
    </preConditions>
      <addColumn tableName="loan_config">
        <column name="short_names" type="VARCHAR(256)"/>
      </addColumn>
    </changeSet>

    <changeSet id="156-alter-loan-config-add-collateral_requirement" author="Sadaiba">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="loan_config" columnName="collateral_requirement"/>
            </not>
        </preConditions>
        <addColumn tableName="loan_config">
            <column name="collateral_requirement" type="Float" />
        </addColumn>
    </changeSet>

  <changeSet id="157-drop-insurance-remarks" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="insurance" columnName="remarks"/>
    </preConditions>

    <dropColumn tableName="insurance" columnName="remarks"/>
  </changeSet>

  <changeSet id="157-drop-insurance_history" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="insurance_history"/>
    </preConditions>

    <dropTable tableName="insurance_history"/>
  </changeSet>

  <changeSet id="157-create-customer_activity_log" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_activity_log"/>
      </not>
    </preConditions>

    <createTable tableName="customer_activity_log">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT"/>
      <column name="modified_by_id" type="BIGINT"/>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="true"/>
      </column>
      <column name="version" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="customer_info_id" type="BIGINT"/>
      <column name="detail" type="LONGTEXT"/>
      <column name="log_type" type="INT"/>
    </createTable>
  </changeSet>
  <changeSet id="262-alter-legal-status-drop-corporate-structure" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="legal_status" columnName="corporate_structure"/>
    </preConditions>
    <dropColumn tableName="legal_status" columnName="corporate_structure"/>
  </changeSet>
  <changeSet id="263-alter-legal-status-add-corporate-structure-id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="legal_status" columnName="corporate_structure_id"/>
      </not>
    </preConditions>
    <addColumn tableName="legal_status">
      <column name="corporate_structure_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal_status_corporate_structure_id_company_id"
          referencedTableName="company"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>
  <changeSet id="264-alter-legal-status-audit-drop-corporate_structure" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="legal_status_audit" columnName="corporate_structure"/>
    </preConditions>
    <dropColumn tableName="legal_status_audit" columnName="corporate_structure"/>
  </changeSet>
  <changeSet id="265-alter-legal-status-audit-drop-add-corporate_structure_id" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="legal_status_audit" columnName="corporate_structure_id"/>
      </not>
    </preConditions>
    <addColumn tableName="legal_status_audit">
      <column name="corporate_structure_id" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="271-alter-legal-status-drop-not-null-constrain-registered_under_act" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="legal_status" columnName="registered_under_act"/>
    </preConditions>
    <dropNotNullConstraint tableName="legal_status" columnName="registered_under_act" columnDataType="VARCHAR(256)"/>
  </changeSet>

  <changeSet id="277-alter-proprietor-add-column-type" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="proprietor" columnName="type"/>
      </not>
    </preConditions>
    <addColumn tableName="proprietor">
      <column name="type" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="278-alter-proprietor_audit-add-column-type" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="proprietor_audit" columnName="type"/>
      </not>
    </preConditions>
    <addColumn tableName="proprietor_audit">
      <column name="type" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="279-create-table-customer-activity" author="rujan">

    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_activity"/>
      </not>
    </preConditions>

    <createTable tableName="customer_activity">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="profile_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_customer_activity_customer_info"
          referencedTableName="customer_info"
          referencedColumnNames="id"/>
      </column>
      <column name="data" type="LONGTEXT"/>
      <column name="description" type="LONGTEXT"/>
      <column name="activity" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="activity_type" type="INT">
        <constraints nullable="false"/>
      </column>

      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_activity_modified_by"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>

      <column name="modified_on" type="DATETIME">
        <constraints nullable="false"/>
      </column>

    </createTable>
  </changeSet>
  <changeSet id="280-drop-customer-activity-log" author="rujan">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="customer_activity_log"/>
    </preConditions>

    <dropTable tableName="customer_activity_log"/>
  </changeSet>

  <changeSet id="178-create-crg-gamma" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="crg_gamma"/>
      </not>
    </preConditions>
    <createTable tableName="crg_gamma">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_crg_gamma_created_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_crg_gamma_modified_by_id"
                     referencedTableName="users"
                     referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="178-alter-customer-info-add-crg_gamma" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="crg_gamma_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="crg_gamma_id" type="BIGINT">
        <constraints nullable="true"
                     foreignKeyName="fk_crg_gamma_id"
                     referencedTableName="crg_gamma"
                     referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>
  <changeSet id="179-alter-customer-activity-add-customer-loan-id" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_activity" columnName="customer_loan_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_activity">
      <column name="customer_loan_id" type="BIGINT">
      </column>
    </addColumn>
  </changeSet>


  <changeSet id="180-create-cicl" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="cicl"/>
      </not>
    </preConditions>
    <createTable tableName="cicl">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_cicl_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_cicl_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
      <column name="remarks" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="181-alter-customer-info-add-cicl" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_info" columnName="cicl_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_info">
      <column name="cicl_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_info_cicl_id"
          referencedTableName="cicl"
          referencedColumnNames="id"/>
      </column>

    </addColumn>
  </changeSet>

  <changeSet id="182-alter-document-add-check_type" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="document" columnName="check_type"/>
      </not>
    </preConditions>

    <addColumn tableName="document">
      <column name="check_type" type="INT"/>
    </addColumn>
  </changeSet>

  <changeSet id="272-alter-customer-add-introduction" author="sadaiba">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer" columnName="introduction"/>
      </not>
    </preConditions>
    <addColumn tableName="customer">
      <column name="introduction" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="272-alter-customer_audit-add-introduction" author="sadaiba">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_audit" columnName="introduction"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_audit">
      <column name="introduction" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="298-alter-table-guarantor-add-doc-path" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="doc_path"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="doc_path" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="301-alter-table-guarantor-add-net-worth" author="buddha">
  <preConditions onFail="MARK_RAN">
    <not>
      <columnExists tableName="guarantor" columnName="net_worth"/>
    </not>
  </preConditions>
  <addColumn tableName="guarantor">
    <column name="net_worth" type="DOUBLE"/>
  </addColumn>
</changeSet>

  <changeSet id="302-alter-table-guarantor-add-consentOfLegalHeirs" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="consent_of_legal_heirs"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="consent_of_legal_heirs" type="BOOLEAN"/>
    </addColumn>
  </changeSet>

  <changeSet id="303-alter-table-guarantor-add-provinceTemporary" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="province_temporary_id"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="province_temporary_id" type="BIGINT">
        <constraints referencedTableName="province" referencedColumnNames="id" foreignKeyName="fk_guarantor_province_province_temporary_id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="304-alter-table-guarantor-add-districtTemporary" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="district_temporary_id"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="district_temporary_id" type="BIGINT">
        <constraints referencedTableName="district" referencedColumnNames="id" foreignKeyName="fk_guarantor_district_district_temporary_id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="305-alter-table-guarantor-add-column-municipalitiesTemporary" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="municipalities_temporary_id"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="municipalities_temporary_id" type="BIGINT">
        <constraints referencedTableName="municipality_vdc" referencedColumnNames="id" foreignKeyName="fk_guarantor_municipality_vdc_municipalities_temporary_id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="306-alter-table-guarantor-add-streetName" author="buddha">
    <preConditions>
      <not>
        <columnExists tableName="guarantor" columnName="street_name"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="street_name" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="307-alter-table-guarantor-add-column-wardNumber" author="buddha">
    <preConditions>
      <not>
        <columnExists tableName="guarantor" columnName="ward_number"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="ward_number" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="308-alter-table-guarantor-add-column-wardNumberTemporary" author="buddha">
    <preConditions>
      <not>
        <columnExists tableName="guarantor" columnName="ward_number_temporary"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="ward_number_temporary" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="309-alter-table-guarantor-add-column-streetNameTemporary" author="buddha">
    <preConditions>
      <not>
        <columnExists tableName="guarantor" columnName="street_name_temporary"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="street_name_temporary" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="300-alter-table-crg-question-add-column-customer-type" author="sunil">
    <preConditions>
      <not>
        <columnExists tableName="crg_question" columnName="customer_type"/>
      </not>
    </preConditions>
    <addColumn tableName="crg_question">
      <column name="customer_type" type="BIGINT"/>
    </addColumn>
    <dropColumn tableName="crg_question" columnName="loan_approval_type"/>
  </changeSet>

  <changeSet id="318-alter-Insurance-table-add-column-policyDocumentPath" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance" columnName="policy_document_path"/>
      </not>
    </preConditions>
    <addColumn tableName="insurance">
      <column name="policy_document_path" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="319-alter-Insurance-table-add-column-remark" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance" columnName="remark"/>
      </not>
    </preConditions>
    <addColumn tableName="insurance">
      <column name="remark" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="320-alter-Insurance-table-add-column-assetInsured" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="insurance" columnName="asset_insured"/>
      </not>
    </preConditions>
    <addColumn tableName="insurance">
      <column name="asset_insured" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>

  <changeSet id="321-alter-table-customer-info-add-column-additional-company-info" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="additional_company_info"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="additional_company_info" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="301-alter-table-customer-info-add-column-additional-company-info-audit"
    author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="additional_company_info"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="additional_company_info" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="321-alter-table-customer-info-add-column-succession-planning" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="succession_planning"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="succession_planning" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="321-alter-table-customer-info-add-column-succession-planning-audit"
    author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="succession_planning"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="succession_planning" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="321-alter-table-customer-info-add-column-contact-persons" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info" columnName="contact_persons"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info">
      <column name="contact_persons" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="321-alter-table-customer-info-add-column-contact-persons-audit" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="company_info_audit" columnName="contact_persons"/>
      </not>
    </preConditions>
    <addColumn tableName="company_info_audit">
      <column name="contact_persons" type="LONGTEXT"/>
    </addColumn>
  </changeSet>
  <changeSet id="322-drop-column-contact-person" author="bibash">
    <preConditions onFail="MARK_RAN">
        <columnExists tableName="company_info" columnName="contact_person_id"/>
    </preConditions>
    <dropForeignKeyConstraint baseTableName="company_info"
      constraintName="fk_company_info_contact_person_id"/>
    <dropColumn tableName="company_info" columnName="contact_person_id"/>
  </changeSet>
  <changeSet id="323-drop-table-contact-person" author="bibash">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="contact_person"/>
    </preConditions>
    <dropTable tableName="contact_person"/>
  </changeSet>

  <changeSet id="322-alter-Insurance-table-alter-column-datatype-remark" author="buddha">
    <preConditions onFail="MARK_RAN">
        <columnExists tableName="insurance" columnName="remark"/>
    </preConditions>
    <modifyDataType tableName="insurance" columnName="remark" newDataType="LONGTEXT"/>
  </changeSet>

  <changeSet id="323-alter-cicl-add-column-cibCharge" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="cicl" columnName="cib_charge"/>
      </not>
    </preConditions>
    <addColumn tableName="cicl">
      <column name="cib_charge" type="DOUBLE"/>
    </addColumn>
  </changeSet>
</databaseChangeLog>


