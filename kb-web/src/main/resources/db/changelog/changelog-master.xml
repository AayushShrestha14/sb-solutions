<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

  <changeSet id="5-create-hibernate_sequence" author="msucil">
    <createTable tableName="hibernate_sequence">
      <column name="next_val" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-oauth-token-table" author="msucil">
    <createTable tableName="oauth_access_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication_id" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="client_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="false"/>
      </column>
      <column name="refresh_token" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
    </createTable>

    <addPrimaryKey tableName="oauth_access_token" columnNames="authentication_id"/>

    <createTable tableName="oauth_refresh_token">
      <column name="token_id" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="token" type="BLOB">
        <constraints nullable="true"/>
      </column>
      <column name="authentication" type="BLOB">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-table" author="david">
    <createTable tableName="role">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_role_role_name"
        />
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_access" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>
  <changeSet id="5-create-province" author="david">
    <createTable tableName="province">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-district" author="david">
    <createTable tableName="district">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_district_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-municipality-vdc" author="david">
    <createTable tableName="municipality_vdc">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_municipality_vdc_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-branch" author="david">
    <createTable tableName="branch">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_branch_name"
        />
      </column>
      <column name="branch_code" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_branch_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-user-table" author="msucil">
    <createTable tableName="users">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="user_name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_username"
        />
      </column>
      <column name="email" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_user_email"
        />
      </column>
      <column name="password" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="branch_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_user_branch_id"
          referencedTableName="branch"
          referencedColumnNames="id"/>
      </column>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="signature_image" type="VARCHAR(256)"/>
      <column name="profile_picture" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-user-table" author="david">
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="created_by_id"
      constraintName="fk_user_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="users" baseColumnNames="modified_by_id"
      constraintName="fk_user_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>


  <changeSet id="5-create-foreign-key-in-branch-table" author="david">
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="created_by_id"
      constraintName="fk_branch_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="branch" baseColumnNames="modified_by_id"
      constraintName="fk_branch_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-foreign-key-in-role-table" author="david">
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="created_by_id"
      constraintName="fk_role_created_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="role" baseColumnNames="modified_by_id"
      constraintName="fk_role_modified_by_id" referencedTableName="users"
      referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="5-create-rights" author="david">
    <createTable tableName="rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="rights" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-permission" author="david">
    <createTable tableName="permission">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="permission_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_permission_permission_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
      <column name="orders" type="BIGINT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-nav" author="david">
    <createTable tableName="sub_nav">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sub_nav_name" type="VARCHAR(256)">
        <constraints nullable="false"
          unique="true"
          uniqueConstraintName="udx_sub_nav_sub_nav_name"/>
      </column>
      <column name="front_url" type="VARCHAR(256)"/>
      <column name="fa_icon" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-url-api" author="david">
    <createTable tableName="url_api">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="api_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="type" type="VARCHAR(256)"/>
    </createTable>
  </changeSet>

  <changeSet id="5-permission-api-list" author="rujan">
    <createTable tableName="permission_api_list">
      <column name="permission_id" type="BIGINT">

      </column>
      <column name="api_list_id" type="BIGINT">
        <constraints unique="true"/>
      </column>

    </createTable>
    <addForeignKeyConstraint baseColumnNames="permission_id"
      baseTableName="permission_api_list"
      constraintName="fk_permission_api_list_permission_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="permission"/>
  </changeSet>

  <changeSet id="5-permission-sub-navs" author="rujan">
    <createTable tableName="permission_sub_navs">
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_permission_nav_id"
          referencedTableName="permission"
          referencedColumnNames="id"
        />

      </column>
      <column name="sub_navs_id" type="BIGINT">
        <constraints unique="true"
          foreignKeyName="fk_sub_nav_id"
          referencedTableName="sub_nav"
          referencedColumnNames="id"/>
      </column>

    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights" author="david">
    <createTable tableName="role_permission_rights">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="permission_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_permission_id"
          referencedTableName="permission"
          referencedColumnNames="id"/>
      </column>
      <column name="del" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_role_permission_rights_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-role-permission-rights-api-rights" author="david">
    <createTable tableName="role_permission_rights_api_rights">
      <column name="role_permission_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="api_rights_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="role_permission_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_role_permission_rights_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="role_permission_rights"/>
    <addForeignKeyConstraint baseColumnNames="api_rights_id"
      baseTableName="role_permission_rights_api_rights"
      constraintName="fk_role_permission_rights_api_rights_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="url_api"/>
  </changeSet>

  <changeSet id="5-create-company" author="david">
    <createTable tableName="company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="4-create-nepse_company" author="david">
    <createTable tableName="nepse_company">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount_per_unit" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepse_company_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-base_http" author="david">
    <createTable tableName="base_http">
      <column name="base_http_id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="base_url" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="flag" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan_template" author="david">
    <createTable tableName="loan_template">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="template_url" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="order_url" type="INT"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="template_view" type="VARCHAR2(4000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_template_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sector" author="david">
    <createTable tableName="sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="sector_code" type="VARCHAR(256)"/>
      <column name="sector_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-sector" author="david">
    <createTable tableName="sub_sector">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_sector_code" type="VARCHAR(256)"/>
      <column name="sub_sector_name" type="VARCHAR(256)"/>
      <column name="sector_id" type="BIGINT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_sector_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="sector_id"
      baseTableName="sub_sector"
      constraintName="fk_sub_sector_sector_id"
      referencedColumnNames="id"
      referencedTableName="sector"/>

  </changeSet>

  <changeSet id="5-create-segment" author="david">
    <createTable tableName="segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="segment_name" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-sub-segment" author="david">
    <createTable tableName="sub_segment">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="is_funded" type="BOOLEAN">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="sub_segment_name" type="VARCHAR(256)"/>
      <column name="segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_sub_segment_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="segment_id"
      baseTableName="sub_segment"
      constraintName="fk_sub_segment_segment_id"
      referencedColumnNames="id"
      referencedTableName="segment"/>

  </changeSet>


  <changeSet id="5-create-valuator" author="david">
    <createTable tableName="valuator">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="contact_no" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street_name" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="site_province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="site_district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="site_municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_site_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="site_street_name" type="VARCHAR(256)"/>
      <column name="site_ward_number" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_valuator_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-config" author="david">
    <createTable tableName="loan_config">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="is_fundable" type="boolean"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="is_renewable" type="boolean"/>
      <column name="total_points" type="BIGINT"/>
      <column name="enable_eligibility" type="boolean"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_config_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-sub-segment-loan-config" author="david">
    <createTable tableName="sub_segment_loan_config">
      <column name="sub_segment_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="sub_segment_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_sub_segment_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="sub_segment"/>
    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="sub_segment_loan_config"
      constraintName="fk_sub_segment_loan_config_list_loan_config_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="5-create-document" author="david">
    <createTable tableName="document">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable=" false"
          unique="true"
          uniqueConstraintName="udx_document_name"
        />
      </column>
      <column name="url" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_document_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-loan-cycle" author="david">
    <createTable tableName="loan_cycle">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="cycle" type="VARCHAR(256)">
        <constraints nullable=" false"/>
      </column>
      <column name="label" type="VARCHAR2(1000)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_loan_cycle_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-document-loan-cycle" author="msucil">
    <createTable tableName="document_loan_cycle">
      <column name="document_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_cycle_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="document_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_document_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
    <addForeignKeyConstraint baseColumnNames="loan_cycle_id"
      baseTableName="document_loan_cycle"
      constraintName="fk_document_loan_cycle_loan_cycle_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_cycle"/>
  </changeSet>

  <changeSet id="5-create-loan-config-template-list" author="david">
    <createTable tableName="loan_config_template_list">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="template_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="template_list_id"
      baseTableName="loan_config_template_list"
      constraintName="fk_loan_config_template_list_template_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_template"/>
  </changeSet>

  <changeSet id="5-create-loan-config-initial" author="david">
    <createTable tableName="loan_config_initial">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="initial_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="initial_id"
      baseTableName="loan_config_initial"
      constraintName="fk_loan_config_initial_initial_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-loan-config-renew" author="david">
    <createTable tableName="loan_config_renew">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="renew_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
    <addForeignKeyConstraint baseColumnNames="renew_id"
      baseTableName="loan_config_renew"
      constraintName="fk_loan_config_renew_renew_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="5-create-approval-limit" author="david">
    <createTable tableName="approval_limit">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="amount" type="DOUBLE"/>
      <column name="loan_approval_type" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="loan_category_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_loan_category_id"
          referencedTableName="loan_config"
          referencedColumnNames="id"
        />
      </column>
      <column name="authorities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval-limit_authorities_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_limit_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="5-create-customer" author="david">
    <createTable tableName="customer">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_name" type="VARCHAR(256)"/>
      <column name="customer_id" type="VARCHAR(256)"/>
      <column name="account_no" type="VARCHAR(256)"/>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
      <column name="municipalities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
      <column name="street" type="VARCHAR(256)"/>
      <column name="ward_number" type="VARCHAR(256)"/>
      <column name="telephone" type="VARCHAR(256)"/>
      <column name="mobile" type="VARCHAR(256)"/>
      <column name="email" type="VARCHAR(256)"/>
      <column name="initial_relation_date" type="DATE"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-customer-relative" author="david">
    <createTable tableName="customer_relative">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="title" type="VARCHAR(256)"/>
      <column name="customer_relation" type="VARCHAR(256)"/>
      <column name="customer_relative_name" type="VARCHAR(256)"/>
      <column name="citizenship_number" type="VARCHAR(256)"/>
      <column name="citizenship_issued_date" type="DATE"/>
      <column name="citizenship_issued_place" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_relative_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-customer-customer-relatives" author="david">
    <createTable tableName="customer_customer_relatives">
      <column name="customer_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="customer_relatives_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="customer_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer"/>
    <addForeignKeyConstraint baseColumnNames="customer_relatives_id"
      baseTableName="customer_customer_relatives"
      constraintName="fk_customer_customer_relatives_customer_relatives_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="customer_relative"/>
  </changeSet>

  <changeSet id="5-create-capital" author="david">
    <createTable tableName="capital">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="authorized_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="paid_up_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="issued_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="total_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="fixed_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="working_capital" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="number_of_shareholder" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_capital_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-legal-status" author="david">
    <createTable tableName="legal_status">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="company_name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="corporate_structure" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registered_under_act" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_office" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_number" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="pan_registration_date" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal_status_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_legal-status_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-swot" author="david">
    <createTable tableName="swot">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="strength" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="weakness" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="opportunity" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="threats" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_swot_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity_info" author="david">
    <createTable tableName="entity_info">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="legal_status_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_legal_status_id"
          referencedTableName="legal_status"
          referencedColumnNames="id"/>
      </column>
      <column name="capital_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_capital_id"
          referencedTableName="capital"
          referencedColumnNames="id"/>
      </column>
      <column name="swot_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_entity_info_swot_id"
          referencedTableName="swot"
          referencedColumnNames="id"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_entity_info_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-management-team" author="david">
    <createTable tableName="management_team">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="description" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="designation" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_management_team_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-proprietor" author="david">
    <createTable tableName="proprietor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="contact_no" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_province_id"
          referencedTableName="province"
          referencedColumnNames="id"
        />
      </column>
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_district_id"
          referencedTableName="district"
          referencedColumnNames="id"
        />
      </column>
      <column name="municipality_vdc_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"
        />
      </column>
      <column name="share" type="DOUBLE">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_proprietor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="5-create-entity-info-management-team-list" author="david">
    <createTable tableName="entity_info_management_team_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="management_team_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="management_team_list_id"
      baseTableName="entity_info_management_team_list"
      constraintName="fk_entity_info_management_team_list_management_team_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="management_team"/>
  </changeSet>

  <changeSet id="5-create-entity-info-proprietors-list" author="david">
    <createTable tableName="entity_info_proprietors_list">
      <column name="entity_info_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="proprietors_list_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseColumnNames="entity_info_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_entity_info_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="entity_info"/>
    <addForeignKeyConstraint baseColumnNames="proprietors_list_id"
      baseTableName="entity_info_proprietors_list"
      constraintName="fk_entity_info_proprietors_list_proprietors_list_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="proprietor"/>
  </changeSet>

  <changeSet id="5-create-guarantor" author="david">
    <createTable tableName="guarantor">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)"/>
      <column name="address" type="VARCHAR(256)"/>
      <column name="citizenNumber" type="VARCHAR(256)"/>
      <column name="citizenIssuedYear" type="DATE"/>
      <column name="citizenIssuedPlace" type="VARCHAR(256)"/>
      <column name="contactNumber" type="VARCHAR(256)"/>
      <column name="fatherName" type="VARCHAR(256)"/>
      <column name="grandFatherName" type="VARCHAR(256)"/>
      <column name="relationship" type="VARCHAR(256)"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-type-table" author="msucil">
    <createTable tableName="memo_type">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-table" author="msucil">
    <createTable tableName="memo">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="reference_number" type="VARCHAR(256)">
        <constraints nullable="true"/>
      </column>
      <column name="subject" type="VARCHAR(256)">
        <constraints nullable="false"/>
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="content" type="TEXT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_type_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_type_id"
          referencedTableName="memo_type"
          referencedColumnNames="id"
        />
      </column>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="3-create-memo-cc-user-table" author="msucil">
    <createTable tableName="memo_cc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="user_id"
      constraintName="fk_memo_cc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_cc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-bcc-user-table" author="msucil">
    <createTable tableName="memo_bcc_user">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="user_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>

    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="user_id"
      constraintName="fk_memo_bcc_user_user_id"
      referencedTableName="users" referencedColumnNames="id"/>
    <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="memo_id"
      constraintName="fk_memo_bcc_user_memo_id"
      referencedTableName="memo" referencedColumnNames="id"/>
  </changeSet>

  <changeSet id="3-create-memo-stage-table" author="msucil">
    <createTable tableName="memo_stage">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="memo_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_memo_id"
          referencedColumnNames="id"
          referencedTableName="memo"
        />
      </column>
      <column name="sent_by" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_by_user_id"
          referencedColumnNames="id"
          referencedTableName="users"
        />
      </column>
      <column name="sent_to" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_memo_stage_sent_to_user_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="stage" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="note" type="TEXT"/>

      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <!-- Do not update changeset above this section //-->

  <!-- Changesets accumulated with each version of release //-->
  <include file="release/v0.1.0-release.xml" relativeToChangelogFile="true"/>
  <include file="release/v0.2.0-release.xml" relativeToChangelogFile="true"/>
  <include file="release/v1.0.0-release.xml" relativeToChangelogFile="true"/>


  <!-- Update changesets below this section //-->

  <changeSet id="55-alter-nepse-add-field-company_code" author="bibas">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="nepse_company" columnName="company_code"/>
      </not>
    </preConditions>
    <addColumn tableName="nepse_company">
      <column name="company_Code" type="VARCHAR(256)"/>
    </addColumn>
  </changeSet>
  <changeSet id="55-alter-nepse-add-field-shareType" author="bibas">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="nepse_company" columnName="share_type"/>
      </not>
    </preConditions>
    <addColumn tableName="nepse_company">
      <column name="share_type" type="BIGINT"/>
    </addColumn>
  </changeSet>

  <changeSet id="59-create-shareValue-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="share_value"/>
      </not>
    </preConditions>
    <createTable tableName="share_value">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_share_value_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_share_value_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="share_data" type="varchar(256)">
      </column>
      <column name="status" type="BIGINT">
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <!-- Enhance change set start-->
  <changeSet id="61-create-loan-config-enhance" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="loan_config_enhance"/>
      </not>
    </preConditions>

    <createTable tableName="loan_config_enhance">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="enhance_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="61-create-loan-config-enhance-loan-config-id-constraint" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_enhance"
          foreignKeyName="fk_loan_config_enhance_loan_config_id"/>
      </not>
    </preConditions>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_enhance"
      constraintName="fk_loan_config_enhance_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="61-create-loan-config-enhance-enhance-id-constraint" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_enhance"
          foreignKeyName="fk_loan_config_enhance_enhance_id"/>
      </not>
    </preConditions>
    <addForeignKeyConstraint baseColumnNames="enhance_id"
      baseTableName="loan_config_enhance"
      constraintName="fk_loan_config_enhance_enhance_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>
  <!-- Enhance change set end-->

  <!-- Partial Settlement change set start-->
  <changeSet id="61-create-loan-config-partial-settlement" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="loan_config_partial_settlement"/>
      </not>
    </preConditions>

    <createTable tableName="loan_config_partial_settlement">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="partial_settlement_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="61-create-loan-config-partial-settlement-loan-config-id-constraint" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_partial_settlement"
          foreignKeyName="fk_loan_config_partial_settlement_loan_config_id"/>
      </not>
    </preConditions>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_partial_settlement"
      constraintName="fk_loan_config_partial_settlement_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="61-create-loan-config-partial-settlement-partial-settlement-id-constraint"
    author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_partial_settlement"
          foreignKeyName="fk_loan_config_partial_settlement_partial_settlement_id"/>
      </not>
    </preConditions>
    <addForeignKeyConstraint baseColumnNames="partial_settlement_id"
      baseTableName="loan_config_partial_settlement"
      constraintName="fk_loan_config_partial_settlement_partial_settlement_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>
  <!-- Partial Settlement change set end-->

  <!-- Full Settlement change set start-->
  <changeSet id="61-create-loan-config-full-settlement" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="loan_config_full_settlement"/>
      </not>
    </preConditions>

    <createTable tableName="loan_config_full_settlement">
      <column name="loan_config_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="full_settlement_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="61-create-loan-config-full-settlement-loan-config-id-constraint" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_full_settlement"
          foreignKeyName="fk_loan_config_full_settlement_loan_config_id"/>
      </not>
    </preConditions>

    <addForeignKeyConstraint baseColumnNames="loan_config_id"
      baseTableName="loan_config_full_settlement"
      constraintName="fk_loan_config_full_settlement_loan_config_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="loan_config"/>
  </changeSet>

  <changeSet id="61-create-loan-config-full-settlement-full-settlement-id-constraint"
    author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <foreignKeyConstraintExists foreignKeyTableName="loan_config_full_settlement"
          foreignKeyName="fk_loan_config_full_settlement_full_settlement_id"/>
      </not>
    </preConditions>
    <addForeignKeyConstraint baseColumnNames="full_settlement_id"
      baseTableName="loan_config_full_settlement"
      constraintName="fk_loan_config_full_settlement_full_settlement_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="document"/>
  </changeSet>

  <changeSet id="13-alter-valuator-add-state" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="valuator" columnName="state"/>
      </not>
    </preConditions>
    <addColumn tableName="valuator">
      <column name="state" type="INT"/>
    </addColumn>
  </changeSet>
  <!-- Full Settlement change set end-->

  <changeSet id="13-alter-customer-add-profile_pic" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer" columnName="profile_pic"/>
      </not>
    </preConditions>
    <addColumn tableName="customer">
      <column name="profile_pic" type="varchar(100)"/>
    </addColumn>
  </changeSet>

  <changeSet id="44-add-authorization-table" author="msucil">
    <createTable tableName="authorization">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(255)">
        <constraints nullable="false" unique="true"/>
      </column>
      <column name="value" type="VARCHAR(255)">
        <constraints nullable="false" unique="true"/>
      </column>
      <column name="key" type="VARCHAR(255)">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>


  <changeSet id="44-add-seed-data" author="msucil">
    <sql>
      <![CDATA[
        INSERT INTO [authorization] (name, value, [key]) VALUES
          ('Create Questions', 'CREATE_QUESTION', 'eligibility-question'),
          ('View Questions', 'VIEW_QUESTION', 'eligibility-question'),
          ('Update Questions', 'UPDATE_QUESTION', 'eligibility-question'),
          ('Delete Questions', 'DELETE', 'eligibility-question'),

          ('Create Branch', 'CREATE_BRANCH', 'branch'),
          ('View Branch', 'VIEW_BRANCH', 'branch'),
          ('Update Branch', 'UPDATE_BRANCH', 'branch'),
          ('Delete Branch', 'DELETE_BRANCH', 'branch')
      ]]>
    </sql>
  </changeSet>

  <changeSet id="63-rename-customer-document-Path-customer-loan" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="customer_document_Path_customer_loan"/>
    </preConditions>
    <renameTable oldTableName="customer_document_Path_customer_loan"
      newTableName="customer_document_path_customer_loan"/>
  </changeSet>

  <changeSet id="63-rename-customer-document-Path-customer-loan-audit" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="customer_document_Path_customer_loan_audit"/>
    </preConditions>
    <renameTable oldTableName="customer_document_Path_customer_loan_audit"
      newTableName="customer_document_path_customer_loan_audit"/>
  </changeSet>

  <changeSet id="63-offer-letter-Path-customer-loan" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="offer_letter_Path_customer_loan"/>
    </preConditions>
    <renameTable oldTableName="offer_letter_Path_customer_loan"
      newTableName="offer_letter_path_customer_loan"/>
  </changeSet>

  <changeSet id="64-alter-branch-add-column-location-preview" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="branch" columnName="location_preview"/>
      </not>
    </preConditions>
    <addColumn tableName="branch">
      <column name="location_preview" type="VARCHAR(500)"/>
    </addColumn>
  </changeSet>

  <changeSet id="62-create-groups" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="groups"/>
      </not>
    </preConditions>
    <createTable tableName="groups">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_group_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_group_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="112-alter-customer-loan-add-groups" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="group_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="group_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_groups_id"
          referencedTableName="groups"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet author="rabin" id="60-base-interest">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="base_interest_rate"/>
      </not>
    </preConditions>

    <createTable tableName="base_interest_rate">
      <column name="id" autoIncrement="true" type="BIGINT">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="rate" type="FLOAT">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="112-alter-customer-remove-account-no" author="rujan">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer" columnName="account_no"/>
    </preConditions>
    <dropColumn tableName="customer" columnName="account_no"/>
  </changeSet>

  <changeSet id="67-create-vehicle-security" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="vehicle_security"/>
      </not>
    </preConditions>
    <createTable tableName="vehicle_security">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_vehicle_security_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_vehicle_security_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="67-alter-customer-loan-add-vehicle-security" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="vehicle_security_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="vehicle_security_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_vehicle_security_id_vehicle_security_id"
          referencedTableName="vehicle_security"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="65-add-table-share_security" author="bibas">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="share_security"/>
      </not>
    </preConditions>
    <createTable tableName="share_security">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="data" type="LONGTEXT">
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_share_security_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_share_security_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="share-security-alter-66" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="share_security_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="share_security_id" type="BIGINT">
        <constraints foreignKeyName="fk_customer_share_security_id"
          referencedTableName="share_security"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="share-customer-data-table-71" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_share_data"/>
      </not>
    </preConditions>
    <createTable tableName="customer_share_data">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true"/>
      </column>
      <column name="company_name" type="Varchar(256)">
      </column>
      <column name="share_type" type="varchar(100)">
      </column>
      <column name="total_share_unit" type="INT">
      </column>
      <column name="share_rate" type="Double">
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_customer_share_data_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_customer_share_data_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="share-customer-data-third-table-72" author="bibash">
    <preConditions>
      <not>
        <tableExists tableName="share_security_customer_share_data"/>
      </not>
    </preConditions>
    <createTable tableName="share_security_customer_share_data">
      <column name="share_security_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_loan_customer_share_security_id"
          referencedTableName="share_security"
          referencedColumnNames="id"/>
      </column>
      <column name="customer_share_data_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_loan_customer_share_data_id"
          referencedTableName="customer_share_data"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="75-create-vehicle-security-valuator" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="vehicle_security_valuator"/>
      </not>
    </preConditions>
    <createTable tableName="vehicle_security_valuator">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_vehicle_security_valuator_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_vehicle_security_valuator_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="valuator_id" type="BIGINT">
        <constraints foreignKeyName="fk_vehicle_security_valuator_valuator_id_valuator_id"
          referencedTableName="valuator" referencedColumnNames="id"/>
      </column>
      <column name="valuated_date" type="DATE"/>
      <column name="valuator_representative_name" type="VARCHAR(255)"/>
      <column name="staff_representative_name" type="VARCHAR(255)"/>
    </createTable>
  </changeSet>
  <changeSet id="75-create-vehicle-security-valuator-list" author="elvin">
    <preConditions>
      <not>
        <tableExists tableName="vehicle_security_valuator_list"/>
      </not>
    </preConditions>
    <createTable tableName="vehicle_security_valuator_list">
      <column name="vehicle_security_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_vehicle_security_valuator_list_vehicle_security_id_vehicle_security_id"
          referencedTableName="vehicle_security" referencedColumnNames="id"/>
      </column>
      <column name="valuator_list_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_vehicle_security_valuator_list_valuator_list_id_vehicle_security_valuator_id"
          referencedTableName="vehicle_security_valuator" referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="75-alter-vehicle-security-valuator" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="vehicle_security_valuator" columnName="vehicle_name"/>
        <columnExists tableName="vehicle_security_valuator" columnName="model"/>
        <columnExists tableName="vehicle_security_valuator" columnName="manufacture_year"/>
        <columnExists tableName="vehicle_security_valuator" columnName="registration_number"/>
        <columnExists tableName="vehicle_security_valuator" columnName="valuation_amount"/>
        <columnExists tableName="vehicle_security_valuator" columnName="engine_number"/>
        <columnExists tableName="vehicle_security_valuator" columnName="chassis_number"/>
        <columnExists tableName="vehicle_security_valuator" columnName="registration_date"/>
        <columnExists tableName="vehicle_security_valuator" columnName="color"/>
        <columnExists tableName="vehicle_security_valuator" columnName="purpose"/>
        <columnExists tableName="vehicle_security_valuator" columnName="supplier"/>
        <columnExists tableName="vehicle_security_valuator" columnName="down_payment"/>
        <columnExists tableName="vehicle_security_valuator" columnName="loan_exposure"/>
        <columnExists tableName="vehicle_security_valuator" columnName="showroom_commission"/>
      </not>
    </preConditions>

    <addColumn tableName="vehicle_security_valuator">
      <column name="vehicle_name" type="VARCHAR(255)"/>
      <column name="model" type="VARCHAR(255)"/>
      <column name="manufacture_year" type="DATE"/>
      <column name="registration_number" type="VARCHAR(255)"/>
      <column name="valuation_amount" type="DOUBLE"/>
      <column name="engine_number" type="VARCHAR(255)"/>
      <column name="chassis_number" type="VARCHAR(255)"/>
      <column name="registration_date" type="DATE"/>
      <column name="color" type="VARCHAR(255)"/>
      <column name="purpose" type="VARCHAR(255)"/>
      <column name="supplier" type="VARCHAR(255)"/>
      <column name="down_payment" type="DOUBLE"/>
      <column name="loan_exposure" type="FLOAT"/>
      <column name="showroom_commission" type="DOUBLE"/>
    </addColumn>
  </changeSet>

  <changeSet id="75-alter-vehicle-security-valuator-remove-data" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="vehicle_security" columnName="data"/>
    </preConditions>
    <dropColumn tableName="vehicle_security" columnName="data"/>
  </changeSet>
  <changeSet id="68-alter-guarantor-remove-column" author="buddha">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="guarantor" columnName="fatherName"/>
      <columnExists tableName="guarantor" columnName="address"/>
      <columnExists tableName="guarantor" columnName="citizenNumber"/>
      <columnExists tableName="guarantor" columnName="grandFatherName"/>
      <columnExists tableName="guarantor" columnName="contactNumber"/>
      <columnExists tableName="guarantor" columnName="citizenIssuedYear"/>
      <columnExists tableName="guarantor" columnName="citizenIssuedPlace"/>
    </preConditions>
    <dropColumn tableName="guarantor" columnName="citizenIssuedPlace"/>
    <dropColumn tableName="guarantor" columnName="citizenIssuedYear"/>
    <dropColumn tableName="guarantor" columnName="contactNumber"/>
    <dropColumn tableName="guarantor" columnName="grandFatherName"/>
    <dropColumn tableName="guarantor" columnName="citizenNumber"/>
    <dropColumn tableName="guarantor" columnName="address"/>
    <dropColumn tableName="guarantor" columnName="fatherName"/>
  </changeSet>

  <changeSet id="69-alter-guarantor-add-column" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="guarantor" columnName="municipalities_id"/>
      </not>
    </preConditions>
    <addColumn tableName="guarantor">
      <column name="citizen_number" type="varchar(256)"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="issued_place" type="varchar(256)"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="issued_year" type="Date"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="father_name" type="varchar(256)"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="grand_father_name" type="varchar(256)"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="contact_number" type="varchar(256)"/>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="province_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_province_id"
          referencedTableName="province"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="district_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_district_id"
          referencedTableName="district"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
    <addColumn tableName="guarantor">
      <column name="municipalities_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_municipality_vdc_id"
          referencedTableName="municipality_vdc"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>


  <changeSet id="70-add-third-table-security-guarantor" author="buddha">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="security_guarantor"/>
      </not>
    </preConditions>
    <createTable tableName="security_guarantor">
      <column name="security_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="guarantor_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="security_id"
      baseTableName="security_guarantor"
      constraintName="fk_security_guarantor_security"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="security"/>
    <addForeignKeyConstraint baseColumnNames="guarantor_id"
      baseTableName="security_guarantor"
      constraintName="fk_security_guarantor_guarantor"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="guarantor"/>
  </changeSet>

  <changeSet id="73-alter-security-add-valuator-id" author="buddha">
    <preConditions>
      <not>
        <columnExists tableName="security" columnName="valuator_id"/>
      </not>
    </preConditions>
    <addColumn tableName="security">
      <column name="valuator_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_security_valuator_id"
          referencedTableName="valuator"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="81-create-groups-valuator" author="buddha">
    <preConditions>
      <not>
        <tableExists tableName="groups_valuator"></tableExists>
      </not>
    </preConditions>
    <createTable tableName="groups_valuator">
      <column name="group_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="valuator_id" type="BIGINT">
        <constraints nullable="false"/>
      </column>
    </createTable>
    <addForeignKeyConstraint baseColumnNames="group_id"
      baseTableName="groups_valuator"
      constraintName="fk_groups_valuator_group_id"
      onDelete="CASCADE"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="groups"/>
    <addForeignKeyConstraint baseColumnNames="valuator_id"
      baseTableName="groups_valuator"
      constraintName="fk_groups_valuator_valuator_id"
      onDelete="RESTRICT"
      onUpdate="CASCADE"
      referencedColumnNames="id"
      referencedTableName="valuator"/>
  </changeSet>
  <changeSet id="78-alter-remove-share-value-table" author="bibash">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="share_value"/>
    </preConditions>
    <dropTable tableName="share_value"/>
  </changeSet>
  <changeSet id="79-create-table-nepse-master" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="nepse_master"/>
      </not>
    </preConditions>
    <createTable tableName="nepse_master">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints primaryKey="true" nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="false"
          foreignKeyName="fk_nepse_master_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints foreignKeyName="fk_nepse_master_modified_by_id"
          nullable="true"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="true"/>
      </column>
      <column name="promoter" type="double">
        <constraints nullable="false"/>
      </column>
      <column name="ordinary" type="double">
        <constraints nullable="false"/>
      </column>
      <column name="status" type="INT">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT">
        <constraints nullable="false"/>
      </column>
    </createTable>
  </changeSet>
  <changeSet id="80-add-column-company-code" author="bibash">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_share_data" columnName="company_code"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_share_data">
      <column name="company_code" type="varchar(256)"/>
    </addColumn>
  </changeSet>
  <changeSet id="80-alter-rename-column-share-rate" author="bibash">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_share_data" columnName="share_rate"/>
    </preConditions>
    <renameColumn tableName="customer_share_data" oldColumnName="share_rate"
      newColumnName="amount_per_unit"/>
  </changeSet>

  <changeSet id="82-create-nepali-template" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="nepali_template"/>
      </not>
    </preConditions>

    <createTable tableName="nepali_template">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepali_template_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_nepali_template_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="type" type="VARCHAR(256)"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="82-create-customer-loan-nepali-templates" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="customer_loan_nepali_templates"/>
      </not>
    </preConditions>

    <createTable tableName="customer_loan_nepali_templates">
      <column name="customer_loan_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_customer_loan_nepali_templates_customer_loan_id_customer_loan_id"
          referencedTableName="customer_loan"
          referencedColumnNames="id"/>
      </column>
      <column name="nepali_templates_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_customer_loan_nepali_templates_nepali_templates_id_nepali_template_id"
          referencedTableName="nepali_template"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="82-alter-customer-add-nepali-detail" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer" columnName="nepali_detail"/>
      </not>
    </preConditions>

    <addColumn tableName="customer">
      <column name="nepali_detail" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="82-alter-customer-audit-add-nepali-detail" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_audit" columnName="nepali_detail"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_audit">
      <column name="nepali_detail" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="82-drop-customer_loan_nepali_templates" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="customer_loan_nepali_templates"/>
    </preConditions>

    <dropTable tableName="customer_loan_nepali_templates"/>
  </changeSet>

  <changeSet id="82-alter-nepali_template" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="nepali_template" columnName="customer_loan_id"/>
      </not>
    </preConditions>

    <addColumn tableName="nepali_template">
      <column name="customer_loan_id" type="BIGINT">
        <constraints foreignKeyName="fk_nepali_template_customer_loan_id_customer_loan_id"
          referencedTableName="customer_loan" referencedColumnNames="id"/>
      </column>
    </addColumn>

  </changeSet>

  <changeSet id="83-alter-customer_loan" author="sunil">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="limitExceed"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="limit_exceed" type="SMALLINT" value="0">
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="approval-role-hierarchy" author="msucil">
    <createTable tableName="approval_role_hierarchy">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="role_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_role_hierarchy_role_id"
          referencedTableName="role"
          referencedColumnNames="id"
        />
      </column>
      <column name="role_order" type="BIGINT">
        <constraints nullable="false"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_role_hierarchy_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_approval_role_hierarchy_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="approval_type" type="VARCHAR(50)" defaultValue="DEFAULT"/>
      <column name="ref_id" type="BIGINT" defaultValue="0">
        <constraints nullable="true"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="84-create-maw-credit-risk-grading" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="maw_credit_risk_grading"/>
      </not>
    </preConditions>
    <createTable tableName="maw_credit_risk_grading">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_maw_credit_risk_grading_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_maw_credit_risk_grading_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
      <column name="data" type="LONGTEXT"/>
    </createTable>
  </changeSet>

  <changeSet id="84-alter-customer-loan-add-maw-credit-risk-grading" author="Amulya">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="maw_credit_risk_grading_id"/>
      </not>
    </preConditions>
    <addColumn tableName="customer_loan">
      <column name="maw_credit_risk_grading_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_maw_credit_risk_grading_id"
          referencedTableName="maw_credit_risk_grading"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="85-alter-customer-loan-add-remarks" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="loan_remarks"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="loan_remarks" type="LONGTEXT"/>
    </addColumn>
  </changeSet>

  <changeSet id="86-alter-customer-loan-add-low-proposed-limit" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="low_proposed_limit"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="low_proposed_limit" type="BIT" defaultValue="0"/>
    </addColumn>
  </changeSet>

  <changeSet id="87-remove-customer-customerId" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer" columnName="customer_id"/>
    </preConditions>

    <dropColumn tableName="customer" columnName="customer_id"/>
  </changeSet>

  <changeSet id="87-remove-customer-title" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer" columnName="title"/>
    </preConditions>

    <dropColumn tableName="customer" columnName="title"/>
  </changeSet>

  <changeSet id="88-alter-customer-loan-drop-low-proposed-limit" author="elvin">
    <preConditions onFail="MARK_RAN">
      <columnExists tableName="customer_loan" columnName="low_proposed_limit"/>
    </preConditions>

    <dropDefaultValue tableName="customer_loan" columnName="low_proposed_limit"/>
    <dropColumn tableName="customer_loan" columnName="low_proposed_limit"/>
  </changeSet>

  <changeSet id="89-create-blacklist" author="Aashish">
    <createTable tableName="black_list">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="name" type="VARCHAR(255)"/>
      <column name="ref" type="VARCHAR(255)"/>
      <column name="doc_type" type="CHAR(1)"/>
      <column name="status" type="VARCHAR(10)"/>

      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_black_list_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_black_list_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>


  <changeSet id="91-remove-security-guarantor" author="elvin">
    <preConditions onFail="MARK_RAN">
      <tableExists tableName="security_guarantor"/>
    </preConditions>

    <dropTable tableName="security_guarantor"/>
  </changeSet>

  <changeSet id="93-create-guarantor-detail" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="guarantor_detail"/>
      </not>
    </preConditions>

    <createTable tableName="guarantor_detail">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_detail_created_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_guarantor_detail_modified_by_id_users_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATETIME">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>
  </changeSet>

  <changeSet id="93-alter-customer-loan-add-guarantor-id" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <columnExists tableName="customer_loan" columnName="guarantor_id"/>
      </not>
    </preConditions>

    <addColumn tableName="customer_loan">
      <column name="guarantor_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_customer_loan_guarantor_id_guarantor_detail_id"
          referencedTableName="guarantor_detail"
          referencedColumnNames="id"/>
      </column>
    </addColumn>
  </changeSet>

  <changeSet id="93-create-guarantor_detail_guarantor_list" author="elvin">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="guarantor_detail_guarantor_list"/>
      </not>
    </preConditions>

    <createTable tableName="guarantor_detail_guarantor_list">
      <column name="guarantor_detail_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_guarantor_detail_guarantor_list_guarantor_detail_id_guarantor_detail_id"
          referencedTableName="guarantor_detail"
          referencedColumnNames="id"/>
      </column>
      <column name="guarantor_list_id" type="BIGINT">
        <constraints
          foreignKeyName="fk_guarantor_detail_guarantor_list_guarantor_list_id_guarantor_id"
          referencedTableName="guarantor"
          referencedColumnNames="id"/>
      </column>
    </createTable>
  </changeSet>

  <changeSet id="94-create-table-chatMessage-message" author="rujan">
    <preConditions onFail="MARK_RAN">
      <not>
        <tableExists tableName="chat_message"/>
      </not>
    </preConditions>
    <createTable tableName="chat_message">
      <column name="id" type="BIGINT" autoIncrement="true">
        <constraints nullable="false" primaryKey="true"/>
      </column>
      <column name="from_user_id" type="VARCHAR(255)"/>
      <column name="to_user_id" type="VARCHAR(255)"/>
      <column name="message" type="LONGTEXT"/>
      <column name="sender_user" type="VARCHAR(255)"/>
      <column name="seen_flag" type="BOOLEAN" defaultValue="false"/>
      <column name="send_date" type="DATETIME"/>


      <column name="created_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_chat_created_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="modified_by_id" type="BIGINT">
        <constraints nullable="true"
          foreignKeyName="fk_chat_modified_by_id"
          referencedTableName="users"
          referencedColumnNames="id"/>
      </column>
      <column name="created_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="last_modified_at" type="DATE">
        <constraints nullable="false"/>
      </column>
      <column name="version" type="INT" defaultValueNumeric="0"/>
    </createTable>

  </changeSet>


</databaseChangeLog>


