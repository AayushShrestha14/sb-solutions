<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="5-create-hibernate_sequence" author="msucil">
        <createTable tableName="hibernate_sequence">
            <column name="next_val" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-oauth-token-table" author="msucil">
        <createTable tableName="oauth_access_token">
            <column name="token_id" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
            <column name="token" type="BLOB">
                <constraints nullable="true"/>
            </column>
            <column name="authentication_id" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="user_name" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
            <column name="client_id" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
            <column name="authentication" type="BLOB">
                <constraints nullable="false"/>
            </column>
            <column name="refresh_token" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
        </createTable>

        <addPrimaryKey tableName="oauth_access_token" columnNames="authentication_id"/>

        <createTable tableName="oauth_refresh_token">
            <column name="token_id" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
            <column name="token" type="BLOB">
                <constraints nullable="true"/>
            </column>
            <column name="authentication" type="BLOB">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-role-table" author="david">
        <createTable tableName="role">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="role_name" type="VARCHAR(256)">
                <constraints nullable=" false"
                             unique="true"
                             uniqueConstraintName="udx_role_role_name"
                />
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="role_type" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="role_access" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>
    <changeSet id="5-create-province" author="david">
        <createTable tableName="province">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-district" author="david">
        <createTable tableName="district">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_district_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-municipality-vdc" author="david">
        <createTable tableName="municipality_vdc">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_municipality_vdc_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-branch" author="david">
        <createTable tableName="branch">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable=" false"
                             unique="true"
                             uniqueConstraintName="udx_branch_name"
                />
            </column>
            <column name="branch_code" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_branch_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"
                />
            </column>
            <column name="district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_branch_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"
                />
            </column>
            <column name="municipality_vdc_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_branch_municipality_vdc_id"
                             referencedTableName="municipality_vdc"
                             referencedColumnNames="id"
                />
            </column>
            <column name="street_name" type="VARCHAR(256)"/>
            <column name="ward_number" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-user-table" author="msucil">
        <createTable tableName="users">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)"/>
            <column name="user_name" type="VARCHAR(256)">
                <constraints nullable=" false"
                             unique="true"
                             uniqueConstraintName="udx_user_username"
                />
            </column>
            <column name="email" type="VARCHAR(256)">
                <constraints nullable=" false"
                             unique="true"
                             uniqueConstraintName="udx_user_email"
                />
            </column>
            <column name="password" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_user_role_id"
                             referencedTableName="role"
                             referencedColumnNames="id"
                />
            </column>
            <column name="branch_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_user_branch_id"
                             referencedTableName="branch"
                             referencedColumnNames="id"/>
            </column>
            <column name="account_no" type="VARCHAR(256)"/>
            <column name="signature_image" type="VARCHAR(256)"/>
            <column name="profile_picture" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-foreign-key-in-user-table" author="david">
        <addForeignKeyConstraint baseTableName="users" baseColumnNames="created_by_id"
                                 constraintName="fk_user_created_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="users" baseColumnNames="modified_by_id"
                                 constraintName="fk_user_modified_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>


    <changeSet id="5-create-foreign-key-in-branch-table" author="david">
        <addForeignKeyConstraint baseTableName="branch" baseColumnNames="created_by_id"
                                 constraintName="fk_branch_created_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="branch" baseColumnNames="modified_by_id"
                                 constraintName="fk_branch_modified_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="5-create-foreign-key-in-role-table" author="david">
        <addForeignKeyConstraint baseTableName="role" baseColumnNames="created_by_id"
                                 constraintName="fk_role_created_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="role" baseColumnNames="modified_by_id"
                                 constraintName="fk_role_modified_by_id" referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="5-create-rights" author="david">
        <createTable tableName="rights">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="rights" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-permission" author="david">
        <createTable tableName="permission">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="permission_name" type="VARCHAR(256)">
                <constraints nullable="false"
                             unique="true"
                             uniqueConstraintName="udx_permission_permission_name"/>
            </column>
            <column name="front_url" type="VARCHAR(256)"/>
            <column name="fa_icon" type="VARCHAR(256)"/>
            <column name="orders" type="BIGINT"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-sub-nav" author="david">
        <createTable tableName="sub_nav">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="sub_nav_name" type="VARCHAR(256)">
                <constraints nullable="false"
                             unique="true"
                             uniqueConstraintName="udx_sub_nav_sub_nav_name"/>
            </column>
            <column name="front_url" type="VARCHAR(256)"/>
            <column name="fa_icon" type="VARCHAR(256)"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-url-api" author="david">
        <createTable tableName="url_api">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="api_url" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="type" type="VARCHAR(256)"/>
        </createTable>
    </changeSet>

    <changeSet id="5-permission-api-list" author="rujan">
        <createTable tableName="permission_api_list">
            <column name="permission_id" type="BIGINT">

            </column>
            <column name="api_list_id" type="BIGINT">
                <constraints unique="true"/>
            </column>

        </createTable>
        <addForeignKeyConstraint baseColumnNames="permission_id"
                                 baseTableName="permission_api_list"
                                 constraintName="fk_permission_api_list_permission_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="permission"/>
    </changeSet>

    <changeSet id="5-permission-sub-navs" author="rujan">
        <createTable tableName="permission_sub_navs">
            <column name="permission_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_permission_nav_id"
                             referencedTableName="permission"
                             referencedColumnNames="id"
                />

            </column>
            <column name="sub_navs_id" type="BIGINT">
                <constraints unique="true"
                             foreignKeyName="fk_sub_nav_id"
                             referencedTableName="sub_nav"
                             referencedColumnNames="id"/>
            </column>

        </createTable>
    </changeSet>

    <changeSet id="5-create-role-permission-rights" author="david">
        <createTable tableName="role_permission_rights">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="role_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_role_permission_rights_role_id"
                             referencedTableName="role"
                             referencedColumnNames="id"
                />
            </column>
            <column name="permission_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_role_permission_rights_permission_id"
                             referencedTableName="permission"
                             referencedColumnNames="id"/>
            </column>
            <column name="del" type="boolean"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_role_permission_rights_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_role_permission_rights_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-role-permission-rights-api-rights" author="david">
        <createTable tableName="role_permission_rights_api_rights">
            <column name="role_permission_rights_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="api_rights_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="role_permission_rights_id"
                                 baseTableName="role_permission_rights_api_rights"
                                 constraintName="fk_role_permission_rights_api_rights_role_permission_rights_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="role_permission_rights"/>
        <addForeignKeyConstraint baseColumnNames="api_rights_id"
                                 baseTableName="role_permission_rights_api_rights"
                                 constraintName="fk_role_permission_rights_api_rights_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="url_api"/>
    </changeSet>

    <changeSet id="5-create-company" author="david">
        <createTable tableName="company">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_company_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_company_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="4-create-nepse_company" author="david">
        <createTable tableName="nepse_company">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="amount_per_unit" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="company_name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_nepse_company_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_nepse_company_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-base_http" author="david">
        <createTable tableName="base_http">
            <column name="base_http_id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="base_url" type="VARCHAR(256)">
                <constraints nullable=" false"/>
            </column>
            <column name="flag" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="5-create-loan_template" author="david">
        <createTable tableName="loan_template">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="template_url" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="order_url" type="INT"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="template_view" type="VARCHAR2(4000)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_template_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_template_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-sector" author="david">
        <createTable tableName="sector">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="sector_code" type="VARCHAR(256)"/>
            <column name="sector_name" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sector_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sector_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-sub-sector" author="david">
        <createTable tableName="sub_sector">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="sub_sector_code" type="VARCHAR(256)"/>
            <column name="sub_sector_name" type="VARCHAR(256)"/>
            <column name="sector_id" type="BIGINT"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sub_sector_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sub_sector_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="sector_id"
                                 baseTableName="sub_sector"
                                 constraintName="fk_sub_sector_sector_id"
                                 referencedColumnNames="id"
                                 referencedTableName="sector"/>

    </changeSet>

    <changeSet id="5-create-segment" author="david">
        <createTable tableName="segment">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="segment_name" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_segment_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_segment_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-sub-segment" author="david">
        <createTable tableName="sub_segment">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="is_funded" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="sub_segment_name" type="VARCHAR(256)"/>
            <column name="segment_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sub_segment_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_sub_segment_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
        <addForeignKeyConstraint baseColumnNames="segment_id"
                                 baseTableName="sub_segment"
                                 constraintName="fk_sub_segment_segment_id"
                                 referencedColumnNames="id"
                                 referencedTableName="segment"/>

    </changeSet>


    <changeSet id="5-create-valuator" author="david">
        <createTable tableName="valuator">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)"/>
            <column name="contact_no" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"/>
            </column>
            <column name="district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"/>
            </column>
            <column name="municipality_vdc_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_municipality_vdc_id"
                             referencedTableName="municipality_vdc"
                             referencedColumnNames="id"/>
            </column>
            <column name="street_name" type="VARCHAR(256)"/>
            <column name="ward_number" type="VARCHAR(256)"/>
            <column name="site_province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_site_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"/>
            </column>
            <column name="site_district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_site_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"/>
            </column>
            <column name="site_municipality_vdc_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_site_municipality_vdc_id"
                             referencedTableName="municipality_vdc"
                             referencedColumnNames="id"/>
            </column>
            <column name="site_street_name" type="VARCHAR(256)"/>
            <column name="site_ward_number" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_valuator_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-loan-config" author="david">
        <createTable tableName="loan_config">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="is_fundable" type="boolean"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="is_renewable" type="boolean"/>
            <column name="total_points" type="BIGINT"/>
            <column name="enable_eligibility" type="boolean"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_config_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_config_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>


    <changeSet id="5-create-sub-segment-loan-config" author="david">
        <createTable tableName="sub_segment_loan_config">
            <column name="sub_segment_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="loan_config_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="sub_segment_id"
                                 baseTableName="sub_segment_loan_config"
                                 constraintName="fk_sub_segment_loan_config_sub_segment_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="sub_segment"/>
        <addForeignKeyConstraint baseColumnNames="loan_config_id"
                                 baseTableName="sub_segment_loan_config"
                                 constraintName="fk_sub_segment_loan_config_list_loan_config_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_config"/>
    </changeSet>

    <changeSet id="5-create-document" author="david">
        <createTable tableName="document">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable=" false"
                             unique="true"
                             uniqueConstraintName="udx_document_name"
                />
            </column>
            <column name="url" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_document_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_document_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-loan-cycle" author="david">
        <createTable tableName="loan_cycle">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="cycle" type="VARCHAR(256)">
                <constraints nullable=" false"/>
            </column>
            <column name="label" type="VARCHAR2(1000)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_cycle_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_loan_cycle_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-document-loan-cycle" author="msucil">
        <createTable tableName="document_loan_cycle">
            <column name="document_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="loan_cycle_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="document_id"
                                 baseTableName="document_loan_cycle"
                                 constraintName="fk_document_loan_cycle_document_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="document"/>
        <addForeignKeyConstraint baseColumnNames="loan_cycle_id"
                                 baseTableName="document_loan_cycle"
                                 constraintName="fk_document_loan_cycle_loan_cycle_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_cycle"/>
    </changeSet>

    <changeSet id="5-create-loan-config-template-list" author="david">
        <createTable tableName="loan_config_template_list">
            <column name="loan_config_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="template_list_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="loan_config_id"
                                 baseTableName="loan_config_template_list"
                                 constraintName="fk_loan_config_template_list_loan_config_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_config"/>
        <addForeignKeyConstraint baseColumnNames="template_list_id"
                                 baseTableName="loan_config_template_list"
                                 constraintName="fk_loan_config_template_list_template_list_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_template"/>
    </changeSet>

    <changeSet id="5-create-loan-config-initial" author="david">
        <createTable tableName="loan_config_initial">
            <column name="loan_config_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="initial_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="loan_config_id"
                                 baseTableName="loan_config_initial"
                                 constraintName="fk_loan_config_initial_loan_config_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_config"/>
        <addForeignKeyConstraint baseColumnNames="initial_id"
                                 baseTableName="loan_config_initial"
                                 constraintName="fk_loan_config_initial_initial_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="document"/>
    </changeSet>

    <changeSet id="5-create-loan-config-renew" author="david">
        <createTable tableName="loan_config_renew">
            <column name="loan_config_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="renew_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="loan_config_id"
                                 baseTableName="loan_config_renew"
                                 constraintName="fk_loan_config_renew_loan_config_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="loan_config"/>
        <addForeignKeyConstraint baseColumnNames="renew_id"
                                 baseTableName="loan_config_renew"
                                 constraintName="fk_loan_config_renew_renew_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="document"/>
    </changeSet>

    <changeSet id="5-create-approval-limit" author="david">
        <createTable tableName="approval_limit">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="amount" type="DOUBLE"/>
            <column name="loan_approval_type" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="loan_category_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_approval-limit_loan_category_id"
                             referencedTableName="loan_config"
                             referencedColumnNames="id"
                />
            </column>
            <column name="authorities_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_approval-limit_authorities_id"
                             referencedTableName="role"
                             referencedColumnNames="id"
                />
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_approval_limit_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_approval_limit_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>


    <changeSet id="5-create-customer" author="david">
        <createTable tableName="customer">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="title" type="VARCHAR(256)"/>
            <column name="customer_name" type="VARCHAR(256)"/>
            <column name="customer_id" type="VARCHAR(256)"/>
            <column name="account_no" type="VARCHAR(256)"/>
            <column name="province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"/>
            </column>
            <column name="district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"/>
            </column>
            <column name="municipalities_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_municipality_vdc_id"
                             referencedTableName="municipality_vdc"
                             referencedColumnNames="id"/>
            </column>
            <column name="street" type="VARCHAR(256)"/>
            <column name="ward_number" type="VARCHAR(256)"/>
            <column name="telephone" type="VARCHAR(256)"/>
            <column name="mobile" type="VARCHAR(256)"/>
            <column name="email" type="VARCHAR(256)"/>
            <column name="initial_relation_date" type="DATE"/>
            <column name="citizenship_number" type="VARCHAR(256)"/>
            <column name="citizenship_issued_date" type="DATE"/>
            <column name="citizenship_issued_place" type="VARCHAR(256)"/>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-customer-relative" author="david">
        <createTable tableName="customer_relative">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="title" type="VARCHAR(256)"/>
            <column name="customer_relation" type="VARCHAR(256)"/>
            <column name="customer_relative_name" type="VARCHAR(256)"/>
            <column name="citizenship_number" type="VARCHAR(256)"/>
            <column name="citizenship_issued_date" type="DATE"/>
            <column name="citizenship_issued_place" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_relative_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_relative_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-customer-customer-relatives" author="david">
        <createTable tableName="customer_customer_relatives">
            <column name="customer_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="customer_relatives_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="customer_id"
                                 baseTableName="customer_customer_relatives"
                                 constraintName="fk_customer_customer_relatives_customer_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="customer"/>
        <addForeignKeyConstraint baseColumnNames="customer_relatives_id"
                                 baseTableName="customer_customer_relatives"
                                 constraintName="fk_customer_customer_relatives_customer_relatives_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="customer_relative"/>
    </changeSet>

    <changeSet id="5-create-capital" author="david">
        <createTable tableName="capital">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="authorized_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="paid_up_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="issued_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="total_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="fixed_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="working_capital" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="number_of_shareholder" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_capital_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_capital_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-legal-status" author="david">
        <createTable tableName="legal_status">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="company_name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="corporate_structure" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="registered_office" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="registered_under_act" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="registration_no" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="registration_date" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="pan_registration_office" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="pan_number" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="pan_registration_date" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_legal_status_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_legal-status_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-swot" author="david">
        <createTable tableName="swot">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="strength" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="weakness" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="opportunity" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="threats" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_swot_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_swot_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-entity_info" author="david">
        <createTable tableName="entity_info">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="legal_status_id" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_entity_info_legal_status_id"
                             referencedTableName="legal_status"
                             referencedColumnNames="id"/>
            </column>
            <column name="capital_id" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_entity_info_capital_id"
                             referencedTableName="capital"
                             referencedColumnNames="id"/>
            </column>
            <column name="swot_id" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_entity_info_swot_id"
                             referencedTableName="swot"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_entity_info_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_entity_info_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-management-team" author="david">
        <createTable tableName="management_team">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="designation" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_management_team_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_management_team_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-proprietor" author="david">
        <createTable tableName="proprietor">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="contact_no" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="province_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_proprietor_province_id"
                             referencedTableName="province"
                             referencedColumnNames="id"
                />
            </column>
            <column name="district_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_proprietor_district_id"
                             referencedTableName="district"
                             referencedColumnNames="id"
                />
            </column>
            <column name="municipality_vdc_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_proprietor_municipality_vdc_id"
                             referencedTableName="municipality_vdc"
                             referencedColumnNames="id"
                />
            </column>
            <column name="share" type="DOUBLE">
                <constraints nullable="false"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_proprietor_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_proprietor_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="5-create-entity-info-management-team-list" author="david">
        <createTable tableName="entity_info_management_team_list">
            <column name="entity_info_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="management_team_list_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="entity_info_id"
                                 baseTableName="entity_info_management_team_list"
                                 constraintName="fk_entity_info_management_team_list_entity_info_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="entity_info"/>
        <addForeignKeyConstraint baseColumnNames="management_team_list_id"
                                 baseTableName="entity_info_management_team_list"
                                 constraintName="fk_entity_info_management_team_list_management_team_list_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="management_team"/>
    </changeSet>

    <changeSet id="5-create-entity-info-proprietors-list" author="david">
        <createTable tableName="entity_info_proprietors_list">
            <column name="entity_info_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="proprietors_list_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseColumnNames="entity_info_id"
                                 baseTableName="entity_info_proprietors_list"
                                 constraintName="fk_entity_info_proprietors_list_entity_info_id"
                                 onDelete="CASCADE"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="entity_info"/>
        <addForeignKeyConstraint baseColumnNames="proprietors_list_id"
                                 baseTableName="entity_info_proprietors_list"
                                 constraintName="fk_entity_info_proprietors_list_proprietors_list_id"
                                 onDelete="RESTRICT"
                                 onUpdate="CASCADE"
                                 referencedColumnNames="id"
                                 referencedTableName="proprietor"/>
    </changeSet>

    <changeSet id="5-create-guarantor" author="david">
        <createTable tableName="guarantor">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)"/>
            <column name="address" type="VARCHAR(256)"/>
            <column name="citizenNumber" type="VARCHAR(256)"/>
            <column name="citizenIssuedYear" type="DATE"/>
            <column name="citizenIssuedPlace" type="VARCHAR(256)"/>
            <column name="contactNumber" type="VARCHAR(256)"/>
            <column name="fatherName" type="VARCHAR(256)"/>
            <column name="grandFatherName" type="VARCHAR(256)"/>
            <column name="relationship" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_guarantor_created_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_guarantor_modified_by_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="3-create-memo-type-table" author="msucil">
        <createTable tableName="memo_type">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="name" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>

            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>

            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="3-create-memo-table" author="msucil">
        <createTable tableName="memo">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="reference_number" type="VARCHAR(256)">
                <constraints nullable="true"/>
            </column>
            <column name="subject" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="sent_by" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="sent_to" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="content" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="stage" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="memo_type_id" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_memo_type_id"
                             referencedTableName="memo_type"
                             referencedColumnNames="id"
                />
            </column>

            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>

            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="3-create-memo-cc-user-table" author="msucil">
        <createTable tableName="memo_cc_user">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="memo_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="user_id"
                                 constraintName="fk_memo_cc_user_user_id"
                                 referencedTableName="users" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="memo_cc_user" baseColumnNames="memo_id"
                                 constraintName="fk_memo_cc_user_memo_id"
                                 referencedTableName="memo" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="3-create-memo-bcc-user-table" author="msucil">
        <createTable tableName="memo_bcc_user">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="memo_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="user_id"
                                 constraintName="fk_memo_bcc_user_user_id"
                                 referencedTableName="users" referencedColumnNames="id"/>
        <addForeignKeyConstraint baseTableName="memo_bcc_user" baseColumnNames="memo_id"
                                 constraintName="fk_memo_bcc_user_memo_id"
                                 referencedTableName="memo" referencedColumnNames="id"/>
    </changeSet>

    <changeSet id="3-create-memo-stage-table" author="msucil">
        <createTable tableName="memo_stage">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true"/>
            </column>
            <column name="memo_id" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_memo_stage_memo_id"
                             referencedColumnNames="id"
                             referencedTableName="memo"
                />
            </column>
            <column name="sent_by" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_memo_stage_sent_by_user_id"
                             referencedColumnNames="id"
                             referencedTableName="users"
                />
            </column>
            <column name="sent_to" type="BIGINT">
                <constraints nullable="false"
                             foreignKeyName="fk_memo_stage_sent_to_user_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="stage" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="note" type="TEXT"/>

            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>

            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <!-- Do not update changeset above this section //-->

    <!-- Changesets accumulated with each version of release //-->
    <include file="release/v0.1.0-release.xml" relativeToChangelogFile="true"/>
    <include file="release/v0.2.0-release.xml" relativeToChangelogFile="true"/>
    <include file="release/v1.0.0-release.xml" relativeToChangelogFile="true"/>
    <include file="release/v2.0.0-release.xml" relativeToChangelogFile="true"/>


    <!-- Update changesets below this section //-->
    <changeSet id="94-create-reporting_info" author="elvin">
        <preConditions>
            <not>
                <tableExists tableName="reporting_info"/>
            </not>
        </preConditions>

        <createTable tableName="reporting_info">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_created_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_modified_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="status" type="INT"/>
        </createTable>
    </changeSet>

    <changeSet id="94-create-reporting_info_level" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="reporting_info_level"/>
            </not>
        </preConditions>

        <createTable tableName="reporting_info_level">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_level_created_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_level_modified_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
            <column name="code" type="VARCHAR(255)"/>
            <column name="description" type="VARCHAR(500)"/>
            <column name="status" type="INT"/>
        </createTable>
    </changeSet>

    <changeSet id="94-create-reporting_info_reporting_info_levels" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="reporting_info_reporting_info_levels"/>
            </not>
        </preConditions>

        <createTable tableName="reporting_info_reporting_info_levels">
            <column name="reporting_info_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_reporting_info_levels_reporting_info_id_reporting_info_id"
                  referencedTableName="reporting_info"
                  referencedColumnNames="id"/>
            </column>
            <column name="reporting_info_levels_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
                  referencedTableName="reporting_info_level"
                  referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="94-create-reporting_info_level_reporting_info_levels" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="reporting_info_level_reporting_info_levels"/>
            </not>
        </preConditions>

        <createTable tableName="reporting_info_level_reporting_info_levels">
            <column name="reporting_info_level_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_level_reporting_info_levels_reporting_info_level_id_reporting_info_level_id"
                  referencedTableName="reporting_info_level"
                  referencedColumnNames="id"/>
            </column>
            <column name="reporting_info_levels_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_reporting_info_level_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
                  referencedTableName="reporting_info_level"
                  referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="94-create-customer_loan_reporting_info_levels" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="customer_loan_reporting_info_levels"/>
            </not>
        </preConditions>

        <createTable tableName="customer_loan_reporting_info_levels">
            <column name="customer_loan_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_customer_loan_reporting_info_levels_customer_loan_id_customer_loan_id"
                  referencedTableName="customer_loan"
                  referencedColumnNames="id"/>
            </column>
            <column name="reporting_info_levels_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_customer_loan_reporting_info_levels_reporting_info_levels_id_reporting_info_level_id"
                  referencedTableName="reporting_info_level"
                  referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="94-drop-sub_sector" author="elvin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="sub_sector"/>
        </preConditions>

        <dropTable tableName="sub_sector"/>
    </changeSet>

    <changeSet id="94-drop-sector" author="elvin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="sector"/>
        </preConditions>

        <dropTable tableName="sector"/>
    </changeSet>

    <changeSet id="94-drop-sub_segment_loan_config" author="elvin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="sub_segment_loan_config"/>
        </preConditions>

        <dropTable tableName="sub_segment_loan_config"/>
    </changeSet>

    <changeSet id="94-drop-sub_segment" author="elvin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="sub_segment"/>
        </preConditions>

        <dropTable tableName="sub_segment"/>
    </changeSet>

    <changeSet id="94-drop-segment" author="elvin">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="segment"/>
        </preConditions>

        <dropTable tableName="segment"/>
    </changeSet>

    <changeSet id="94-create-insurance" author="Aashish">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="insurance"/>
            </not>
        </preConditions>

        <createTable tableName="insurance">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="company" type="VARCHAR(256)"/>
            <column name="insured_amount" type="DOUBLE"/>
            <column name="premium_amount" type="VARCHAR(256)"/>
            <column name="issued_date" type="DATE"/>
            <column name="expiry_date" type="DATE"/>
            <column name="policy_type" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_insurance_created_by_id_users_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_insurance_modified_by_id_users_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="94-alter-customer-loan-add-insurance-id" author="Aashish">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="customer_loan" columnName="insurance_id"/>
            </not>
        </preConditions>

        <addColumn tableName="customer_loan">
            <column name="insurance_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_customer_loan_insurance_id_insurance_id"
                             referencedTableName="insurance"
                             referencedColumnNames="id"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="95-create-notification-master" author="Aashish">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="notification_master"/>
            </not>
        </preConditions>

        <createTable tableName="notification_master">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="notification_key" type="VARCHAR(256)"/>
            <column name="value" type="INT"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_notification_master_created_by_id_users_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                             foreignKeyName="fk_notification_master_modified_by_id_users_id"
                             referencedTableName="users"
                             referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="96-alter-customer_loan-add-has_insurance_expired" author="Aashish">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="customer_loan" columnName="is_insurance_expired"/>
            </not>
        </preConditions>
        <addColumn tableName="customer_loan">
            <column name="is_insurance_expired" type="BIT" defaultValue="0"/>
        </addColumn>
    </changeSet>

    <changeSet id="97-alter-notification-master-add-status" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="notification_master" columnName="status"/>
            </not>
        </preConditions>

        <addColumn tableName="notification_master">
            <column name="status" type="INT"/>
        </addColumn>
    </changeSet>

    <changeSet id="98-alter-legal-status-add-registration-expiry-date" author="buddha-shrestha">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="legal_status" columnName="registration_expiry_date"/>
            </not>
        </preConditions>
        <addColumn tableName="legal_status">
            <column name="registration_expiry_date" type="DATE"/>
        </addColumn>
    </changeSet>

    <changeSet id="99-alter-legal-status-audit-add-registration-expiry-date" author="buddha-shrestha">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="legal_status_audit" columnName="registration_expiry_date"/>
            </not>
        </preConditions>
        <addColumn tableName="legal_status_audit">
            <column name="registration_expiry_date" type="DATE"/>
        </addColumn>
    </changeSet>


    <changeSet id="98-create-insurance_history" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="insurance_history"/>
            </not>
        </preConditions>

        <createTable tableName="insurance_history">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="customer_loan_id" type="VARCHAR(256)"/>
            <column name="company" type="VARCHAR(256)"/>
            <column name="insured_amount" type="DOUBLE"/>
            <column name="premium_amount" type="VARCHAR(256)"/>
            <column name="issued_date" type="DATE"/>
            <column name="expiry_date" type="DATE"/>
            <column name="policy_type" type="VARCHAR(256)"/>
            <column name="created_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_insurance_history_created_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="modified_by_id" type="BIGINT">
                <constraints nullable="true"
                  foreignKeyName="fk_insurance_history_modified_by_id_users_id"
                  referencedTableName="users"
                  referencedColumnNames="id"/>
            </column>
            <column name="created_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="last_modified_at" type="DATE">
                <constraints nullable="false"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
        </createTable>
    </changeSet>

    <changeSet id="98-alter-insurance-add-remarks" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="insurance" columnName="remarks"/>
            </not>
        </preConditions>

        <addColumn tableName="insurance">
            <column name="remarks" type="LONGTEXT"></column>
        </addColumn>
    </changeSet>

    <changeSet id="99-alter-customer-loan-alter-limit_exceed" author="elvin">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="customer_loan" columnName="limit_exceed"/>
        </preConditions>

        <modifyDataType tableName="customer_loan" columnName="limit_exceed" newDataType="INT"/>
        <renameColumn tableName="customer_loan" oldColumnName="limit_exceed" newColumnName="loan_flag"/>
    </changeSet>

    <changeSet id="100-alter-customer-loan-drop-is_insurance_expired" author="elvin">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="customer_loan" columnName="is_insurance_expired"/>
        </preConditions>

        <dropDefaultValue tableName="customer_loan" columnName="is_insurance_expired"/>
        <dropColumn tableName="customer_loan" columnName="is_insurance_expired"/>
    </changeSet>

    <changeSet id="101-alter-customer_loan-drop-loan_flag" author="elvin">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="customer_loan" columnName="loan_flag"/>
        </preConditions>

        <dropColumn tableName="customer_loan" columnName="loan_flag"/>
    </changeSet>

    <changeSet id="101-alter-customer_loan-drop-loan_remarks" author="elvin">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="customer_loan" columnName="loan_remarks"/>
        </preConditions>

        <dropColumn tableName="customer_loan" columnName="loan_remarks"/>
    </changeSet>

    <changeSet id="101-create-customer_loan_flag" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="customer_loan_flag"/>
            </not>
        </preConditions>

        <createTable tableName="customer_loan_flag">
            <column name="id" type="BIGINT" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="version" type="INT" defaultValueNumeric="0"/>
            <column name="flag" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(1000)">
                <constraints nullable="false"/>
            </column>
            <column name="flag_order" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="customer_loan_id" type="BIGINT">
                <constraints nullable="false"
                foreignKeyName="fk_customer_loan_flag_customer_loan_id_customer_loan_id"
                referencedTableName="customer_loan"
                referencedColumnNames="id"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="101-alter-insurance-premium_amount-type" author="elvin">
        <preConditions onFail="MARK_RAN">
            <columnExists tableName="insurance" columnName="premium_amount"/>
            <columnExists tableName="insurance_history" columnName="premium_amount"/>
        </preConditions>

        <modifyDataType tableName="insurance" columnName="premium_amount" newDataType="DOUBLE"/>
        <modifyDataType tableName="insurance_history" columnName="premium_amount" newDataType="DOUBLE"/>
    </changeSet>

    <changeSet id="102-alter-insurance-history-add-remarks" author="elvin">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="insurance_history" columnName="remarks"/>
            </not>
        </preConditions>

        <addColumn tableName="insurance_history">
            <column name="remarks" type="LONGTEXT"></column>
        </addColumn>
    </changeSet>

    <changeSet id="108-alter-customer_loan-add-is_insurance_notified" author="buddha">
        <preConditions onFail="MARK_RAN">
            <not>
                <columnExists tableName="customer_loan" columnName="is_insurance_notified"/>
            </not>
        </preConditions>
        <addColumn tableName="customer_loan">
            <column name="is_insurance_notified" type="BIT" defaultValue="0"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>


